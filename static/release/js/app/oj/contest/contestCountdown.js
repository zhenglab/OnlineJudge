/*! jCountdown jQuery Plugin - v2.0.0 - 2015-06-28
 * https://github.com/tomgrohl/jCountdown/
 * Copyright (c) 2015 Tom Ellis; Licensed MIT */

!function(e,t){typeof define=="function"&&define.amd?define("jcountdown",["jquery"],t):t(e.jQuery)}(this,function(e){e.fn.countdown=function(t){var n=36e5,r=31557600,i=2629800,s=604800,o=86400,u=3600,a=60,f=1,l=/%y|%m|%w|%d|%h|%i|%s|%ty|%tm|%tw|%td|%th|%ti|%ts/g,c=/\d/g,h=function(t,n){var r=t.toString().match(c),i="";return e.each(r,function(e,t){t=Number(t),i+=""+n.digits[t]||""+t}),i},p=function(e){var t=new Date,n=e.data("jcdData");return n?(n.offset!==null&&(t=d(n.offset)),t.setMilliseconds(0),t):new Date},d=function(e){var t,r,i,s=new Date;return e!==null&&(t=e*n,i=s.getTime()- -s.getTimezoneOffset()/60*n+t,r=s.setTime(i)),new Date(r)},v=function(e,t){t.onStart&&e.on("start.jcdevt",t.onStart),t.onChange&&e.on("change.jcdevt",t.onChange),t.onComplete&&e.on("complete.jcdevt",t.onComplete),t.onPause&&e.on("pause.jcdevt",t.onPause),t.onResume&&e.on("resume.jcdevt",t.onResume),t.onLocaleChange&&e.on("locale.jcdevt",t.onLocaleChange)},m=function(e){var t=e.template,n=e.yearsLeft,r=e.monthsLeft,i=e.weeksLeft,s=e.daysLeft,o=e.hrsLeft,u=e.minsLeft,a=e.secLeft,f=!1,c=!1,p=!1,d=!1,v=!1,m=!1;e.isRTL&&(t=e.rtlTemplate),e.omitZero&&(e.yearsAndMonths&&(e.yearsLeft||(f=!0),e.monthsLeft||(c=!0)),e.weeks&&(e.yearsAndMonths&&c&&!e.weeksLeft||!e.yearsAndMonths&&!e.weeksLeft)&&(p=!0),p&&!s&&(d=!0),d&&!o&&(v=!0),v&&!u&&(m=!0)),e.leadingZero&&(n<10&&(n="0"+n),r<10&&(r="0"+r),i<10&&(i="0"+i),s<10&&(s="0"+s),o<10&&(o="0"+o),u<10&&(u="0"+u),a<10&&(a="0"+a)),n=h(n,e),r=h(r,e),i=h(i,e),s=h(s,e),o=h(o,e),u=h(u,e),a=h(a,e);if(e.yearsAndMonths){if(!e.omitZero||!f)t=t.replace("%y",n),t=t.replace("%ty",n==1&&e.yearSingularText?e.yearSingularText:e.yearText);if(!e.omitZero||!f&&r||!f&&!c)t=t.replace("%m",r),t=t.replace("%tm",r==1&&e.monthSingularText?e.monthSingularText:e.monthText)}return e.weeks&&!p&&(t=t.replace("%w",i),t=t.replace("%tw",i==1&&e.weekSingularText?e.weekSingularText:e.weekText)),d||(t=t.replace("%d",s),t=t.replace("%td",s==1&&e.daySingularText?e.daySingularText:e.dayText)),v||(t=t.replace("%h",o),t=t.replace("%th",o==1&&e.hourSingularText?e.hourSingularText:e.hourText)),m||(t=t.replace("%i",u),t=t.replace("%ti",u==1&&e.minSingularText?e.minSingularText:e.minText)),t=t.replace("%s",a),t=t.replace("%ts",a==1&&e.secSingularText?e.secSingularText:e.secText),t=t.replace(l,""),t},g=function(){var e=this,t,n,l,c,h=0,d=0,v=0,g,y,b,w,E="",S,x=function(e){var t;return t=Math.floor(S/e),S-=t*e,t},T=e.data("jcdData");if(!T)return!1;n=p(e),null!==T.serverDiff?l=new Date(T.serverDiff+T.clientdateNow.getTime()):l=T.dateObj,l.setMilliseconds(0),c=T.direction==="down"?l.getTime()-n.getTime():n.getTime()-l.getTime(),S=Math.round(c/1e3),g=x(o),y=x(u),b=x(a),w=x(f),T.yearsAndMonths&&(S+=g*o,h=x(r),d=x(i),g=x(o)),T.weeks&&(S+=g*o,v=x(s),g=x(o));if(T.hoursOnly||T.minsOnly||T.secsOnly)T.yearsAndMonths&&(S+=h*r,S+=d*i,h=d=0),T.weeks&&(S+=v*s,v=0);T.hoursOnly&&(S+=g*o,S+=y*u,y=x(u)),T.minsOnly&&(S+=g*o,g=0,S+=y*u,y=0,S+=b*a,b=x(a)),T.secsOnly&&(S+=g*o,g=0,S+=y*u,y=0,S+=b*a,b=0,S+=w,w=x(f)),T.yearsLeft=h,T.monthsLeft=d,T.weeksLeft=v,T.daysLeft=g,T.hrsLeft=y,T.minsLeft=b,T.secLeft=w,e.data("jcdData",T),T.direction!=="down"||!(n<l||T.minus)||T.direction!=="up"||!(l<n||T.minus),T.direction==="down"&&(n<l||T.minus)||T.direction==="up"&&(l<n||T.minus)?E=m(T):(T.yearsLeft=T.monthsLeft=T.weeksLeft=T.daysLeft=T.hrsLeft=T.minsLeft=T.secLeft=0,E=m(T),T.hasCompleted=!0),e.html(E).triggerMulti("change.jcdevt,countChange",[T]),T.hasCompleted&&(e.triggerMulti("complete.jcdevt,countComplete"),clearInterval(T.timer))},y={init:function(t){var n=e.extend({},e.fn.countdown.defaults,t),r,i,s={};return this.each(function(){var o=e(this),u;o.data("jcdData")&&(o.countdown("changeSettings",t,!0),n=o.data("jcdData"));if(n.date===null&&n.dataAttr===null)return e.error("No Date passed to jCountdown. date option is required."),!0;n.date?i=n.date:i=o.data(n.dataAttr),r=new Date(i),r.toString()==="Invalid Date"&&e.error("Invalid Date passed to jCountdown: "+i),v(o,t),s=e.extend({},n),s.dom={},s.dom.$time=e("<"+s.timeWrapElement+">").addClass(s.timeWrapClass),s.dom.$text=e("<"+s.textWrapElement+">").addClass(s.textWrapClass),s.clientdateNow=new Date,s.clientdateNow.setMilliseconds(0),s.originalHTML=o.html(),s.dateObj=new Date(i),s.dateObj.setMilliseconds(0),s.hasCompleted=!1,s.timer=0,s.yearsLeft=s.monthsLeft=s.weeksLeft=s.daysLeft=s.hrsLeft=s.minsLeft=s.secLeft=0,s.difference=null,u=e.proxy(g,o),s.timer=setInterval(u,s.updateTime),o.data("jcdData",s).triggerMulti("start.jcdevt,countStart",[s]),u()})},changeSettings:function(t,n){return this.each(function(){var r=e(this),i,s,o=e.proxy(g,r);if(!r.data("jcdData"))return!0;i=e.extend({},r.data("jcdData"),t),t.hasOwnProperty("date")&&(s=new Date(t.date),s.toString()==="Invalid Date"&&e.error("Invalid Date passed to jCountdown: "+t.date)),i.completed=!1,i.dateObj=new Date(t.date),clearInterval(i.timer),r.off(".jcdevt").data("jcdData",i),n||(v(r,i),i.timer=setInterval(o,i.updateTime),r.data("jcdData",i),o()),i=null})},resume:function(){return this.each(function(){var t=e(this),n=t.data("jcdData"),r=e.proxy(g,t);if(!n)return!0;t.data("jcdData",n).triggerMulti("resume.jcdevt,countResume",[n]);if(!n.hasCompleted){n.timer=setInterval(r,n.updateTime);if(n.stopwatch&&n.direction==="up"){var i=p(t).getTime()-n.pausedAt.getTime(),s=new Date;s.setTime(n.dateObj.getTime()+i),n.dateObj=s}r()}})},pause:function(){return this.each(function(){var t=e(this),n=t.data("jcdData");if(!n)return!0;n.stopwatch&&(n.pausedAt=p(t)),clearInterval(n.timer),t.data("jcdData",n).triggerMulti("pause.jcdevt,countPause",[n])})},complete:function(){return this.each(function(){var t=e(this),n=t.data("jcdData");if(!n)return!0;clearInterval(n.timer),n.hasCompleted=!0,t.data("jcdData",n).triggerMulti("complete.jcdevt,countComplete",[n])})},destroy:function(){return this.each(function(){var t=e(this),n=t.data("jcdData");if(!n)return!0;clearInterval(n.timer),t.off(".jcdevt").removeData("jcdData").html(n.originalHTML)})},getSettings:function(t){var n=e(this),r=n.data("jcdData");return t&&r?r.hasOwnProperty(t)?r[t]:undefined:r},changeLocale:function(t){var n=e(this),r=n.data("jcdData");return e.fn.countdown.locale[t]?(e.extend(r,e.fn.countdown.locale[t]),n.data("jcdData",r).triggerMulti("locale.jcdevt,localeChange",[r]),!0):(e.error("Locale '"+t+"' does not exist"),!1)}};if(y[t])return y[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||!t)return y.init.apply(this,arguments);e.error("Method "+t+" does not exist in the jCountdown Plugin")},e.fn.countdown.defaults={date:null,dataAttr:null,updateTime:1e3,yearText:"years",monthText:"months",weekText:"weeks",dayText:"天",hourText:"小时",minText:"分",secText:"秒",yearSingularText:"year",monthSingularText:"month",weekSingularText:"week",daySingularText:"天",hourSingularText:"小时",minSingularText:"分钟",secSingularText:"秒",digits:[0,1,2,3,4,5,6,7,8,9],isRTL:!1,minus:!1,onStart:null,onChange:null,onComplete:null,onResume:null,onPause:null,onLocaleChange:null,leadingZero:!1,offset:null,serverDiff:null,hoursOnly:!1,minsOnly:!1,secsOnly:!1,weeks:!1,hours:!1,yearsAndMonths:!1,direction:"down",stopwatch:!1,omitZero:!1,rtlTemplate:"%ts %s : %ti %i : %th %h : %tm %m : %ty %y",template:"%y %ty : %m %tm : %h %th : %i %ti : %s %ts"},e.fn.countdown.locale=[],e.fn.countdown.locale.en={yearText:"年",monthText:"月",weekText:"星期",dayText:"天",hourText:"小时",minText:"分钟",secText:"秒",yearSingularText:"年",monthSingularText:"月",weekSingularText:"星期",daySingularText:"天",hourSingularText:"小时",minSingularText:"分钟",secSingularText:"秒",isRTL:!1},e.fn.triggerMulti=function(t,n){var r=t.split(",");return this.each(function(){var t=e(this);for(var i=0;i<r.length;i++)t.trigger(r[i],n)})}}),require(["jquery","jcountdown"],function(e,t){function n(){var t=location.pathname.split("/")[2],n=0;return e.ajax({url:"/api/contest/time/?contest_id="+t,dataType:"json",method:"get",async:!1,success:function(e){e.code||(n=e.data)}}),n}function i(t){e("#timer").countdown({serverDiff:t,date:"september 21, 2015 21:59",yearsAndMonths:!1,template:e("#template").html()}).on("countComplete",function(){location.reload()})}var r=n();r["status"]==1?i(r.start):r["status"]==0&&i(r.end)}),define("contestCountdown_5_pack",function(){});