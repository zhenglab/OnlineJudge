/*==================================================
 Copyright (c) 2013-2015 司徒正美 and other contributors
 http://www.cnblogs.com/rubylouvre/
 https://github.com/RubyLouvre
 http://weibo.com/jslouvre/
 
 Released under the MIT license
 avalon.shim.js 1.5.5 built in 2015.10.27
 support IE6+ and other browsers
 ==================================================*/

(function(e,t){typeof module=="object"&&typeof module.exports=="object"?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("Avalon requires a window with a document");return t(e)}:t(e)})(typeof window!="undefined"?window:this,function(e,t){function u(){e.console&&avalon.config.debug&&Function.apply.call(console.log,console,arguments)}function C(e){return Function.apply(k,e)}function k(){}function L(e,t){typeof e=="string"&&(e=e.match(c)||[]);var n={},r=t!==void 0?t:1;for(var i=0,s=e.length;i<s;i++)n[e[i]]=r;return n}function O(){if(e.VBArray){var t=document.documentMode;return t?t:e.XMLHttpRequest?7:6}return NaN}function D(e){return v.test(y.call(e))}function B(e,t){return e=Math.floor(e)||0,e<0?Math.max(t+e,0):Math.min(e,t)}function q(e){if(!e)return!1;var t=e.length;if(t===t>>>0){var n=y.call(e).slice(8,-1);if(/(?:regexp|string|function|window|global)$/i.test(n))return!1;if(n==="Array")return!0;try{return{}.propertyIsEnumerable.call(e,"length")===!1?/^\s?function/.test(e.item||e.callee):!0}catch(r){return!e.window}}return!1}function $(e,t,n){var r="for(var "+e+"i=0,n = this.length; i < n; i++){"+t.replace("_","((i in this) && fn.call(scope,this[i],i,this))")+"}"+n;return Function("fn,scope",r)}function J(e,t){try{while(t=t.parentNode)if(t===e)return!0;return!1}catch(n){return!1}}function K(){return(new XMLSerializer).serializeToString(this)}function et(e){var t={};for(var n in e)t[n]=e[n];var i=t.target=e.srcElement;if(e.type.indexOf("key")===0)t.which=e.charCode!=null?e.charCode:e.keyCode;else if(Z.test(e.type)){var s=i.ownerDocument||r,o=s.compatMode==="BackCompat"?s.body:s.documentElement;t.pageX=e.clientX+(o.scrollLeft>>0)-(o.clientLeft>>0),t.pageY=e.clientY+(o.scrollTop>>0)-(o.clientTop>>0),t.wheelDeltaY=t.wheelDelta,t.wheelDeltaX=0}return t.timeStamp=new Date-0,t.originalEvent=e,t.preventDefault=function(){e.returnValue=!1},t.stopPropagation=function(){e.cancelBubble=!0},t}function it(e){for(var t in e){if(!g.call(e,t))continue;var n=e[t];typeof it.plugins[t]=="function"?it.plugins[t](n):typeof it[t]=="object"?avalon.mix(it[t],n):it[t]=n}return this}function ct(e){return(e+"").replace(lt,"\\$&")}function pt(e,t){var n=this.$events||(this.$events={}),i=n[e]||(n[e]=[]);if(typeof t=="function"){var s=t;s.uniqueNumber=Math.random(),t={element:S,type:"user-watcher",handler:k,vmodels:[this],expr:e,uniqueNumber:s.uniqueNumber},t.wildcard=/\*/.test(e)}if(!t.update){if(/\w\.*\B/.test(e)){t.getter=k;var o=this;t.update=function(){var e=this.fireArgs||[];e[2]&&t.handler.apply(o,e),delete this.fireArgs},i.sync=!0,avalon.Array.ensure(i,t)}else avalon.injectBinding(t);s&&(t.handler=s)}else t.oneTime||avalon.Array.ensure(i,t);return function(){t.update=t.getter=t.handler=k,t.element=r.createElement("a")}}function dt(e,t){var n=this.$events;if(n&&n[e]){t&&(t[2]=e);var r=n[e];mt(r,t);var i=this.$up;i&&(this.$pathname&&dt.call(i,this.$pathname+"."+e,t),dt.call(i,"*."+e,t))}else{i=this.$up;if(this.$ups){for(var s in this.$ups)dt.call(this.$ups[s],s+"."+e,t);return}if(i){var o=this.$pathname;o===""&&(o="*");var u=o+"."+e;r=u.split("."),r.indexOf("*")===-1?(dt.call(i,u,t),r[1]="*",dt.call(i,r.join("."),t)):dt.call(i,u,t)}}}function vt(e,t){do{if(e.$watch){var n=e.$events||(e.$events={}),r=n[t]||(n[t]=[]);zt.collectDependency(r);return}e=e.$up;if(!e)break;t=e.$pathname+"."+t}while(!0)}function mt(e,t){if(!e)return;new Date-Qt>444&&typeof e[0]=="object"&&en();var n=[],r=[];for(var i=0,s;s=e[i++];)s.type==="user-watcher"?n.push(s):r.push(s);if(it.async){Rr.render();for(i=0;s=r[i++];)if(s.update){var o=Yt(s);Rr.queue[o]||(Rr.queue[o]=1,Rr.queue.push(s))}}else for(i=0;s=r[i++];)s.update&&s.update();for(i=0;s=n[i++];){if(t&&t[2]===s.expr||s.wildcard)s.fireArgs=t;s.update()}}function xt(e,t){return t=t||{},t.watch=!0,Nt(e,t)}function Tt(){}function Nt(e,t){function m(e){return a[e]===!0}if(!e||e.$id&&e.$accessors)return e;t=t||l;var n=t.force||l,r=t.old,i=r&&r.$accessors||l,s=new Tt,o={},a={},f=[],c=[],h={};e.$skipArray&&(h=L(e.$skipArray),delete e.$skipArray);var p=e.$computed;if(p){delete e.$computed;for(var d in p)a[d]=!0,function(e,t){var n;o[e]={get:function(){return n=t.get.call(this)},set:function(r){if(typeof t.set=="function"){var i=n;t.set.call(this,r);var s=this[e];this.$fire&&s!==i&&this.$fire(e,s,i)}},enumerable:!0,configurable:!0}}(d,p[d])}for(d in e){var v=e[d];yt[d]||(a[d]=!0),typeof v=="function"||v&&v.nodeType||!n[d]&&(d.charAt(0)==="$"||yt[d]||h[d])?f.push(d):Ct(v)?(u("warning:计算属性建议放在$computed对象中统一定义"),function(e,t){var n;o[e]={get:function(){return n=t.get.call(this)},set:function(r){if(typeof t.set=="function"){var i=n;t.set.call(this,r);var s=this[e];this.$fire&&s!==i&&this.$fire(e,s,i)}},enumerable:!0,configurable:!0}}(d,v)):(c.push(d),i[d]?o[d]=i[d]:o[d]=kt(d,v))}o.$model=Dt,s=Et(s,o,e),f.forEach(function(t){s[t]=e[t]}),Mt(s,"$ups",null),Mt(s,"$id","anonymous"),Mt(s,"$up",r?r.$up:null),Mt(s,"$track",Object.keys(a)),Mt(s,"$active",!1),Mt(s,"$pathname",r?r.$pathname:""),Mt(s,"$accessors",o),Mt(s,"hasOwnProperty",m),t.watch&&(Mt(s,"$watch",function(){return pt.apply(s,arguments)}),Mt(s,"$fire",function(e,t){if(e.indexOf("all!")===0){var n=e.slice(4);for(var r in avalon.vmodels){var i=avalon.vmodels[r];i.$fire&&i.$fire.apply(i,[n,t])}}else dt.call(s,e,[t])})),c.forEach(function(t){var n=r&&r[t],i=s[t]=e[t];i&&typeof i=="object"&&(i.$up=s,i.$pathname=t),dt.call(s,t,[i,n])});for(d in p)v=s[d];return s.$active=!0,s}function Ct(e){if(e&&typeof e=="object"){for(var t in e)if(t!=="get"&&t!=="set")return!1;return typeof e.get=="function"}}function kt(e,t){var n;return t=NaN,{get:function(){return this.$active&&vt(this,e),t},set:function(r){if(t===r)return;var i=t;n=Lt(r,t),n?t=n:(n=void 0,t=r),Object(n)===n&&(n.$pathname=e,n.$up=this),this.$active&&dt.call(this,e,[t,i])},enumerable:!0,configurable:!0}}function Lt(e,t,n,r){if(Array.isArray(e))return Ot(e,t,r);if(avalon.isPlainObject(e)){if(t&&typeof t=="object"){var i=At(e),s=At(t);if(i.join(";")===s.join(";")){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t}t.$active=!1}return Nt(e,{old:t,watch:r})}if(n)return e}function Ot(e,t,n){if(t){var r=[0,t.length].concat(e);return t.splice.apply(t,r),t}for(var i in Ft)e[i]=Ft[i];Mt(e,"$up",null),Mt(e,"$pathname",""),Mt(e,"$track",Rt(e.length)),e._=Nt({length:NaN},{watch:!0}),e._.length=e.length,e._.$watch("length",function(t,n){dt.call(e.$up,e.$pathname+".length",[t,n])}),n&&Mt(e,"$watch",function(){return pt.apply(e,arguments)}),E?Object.defineProperty(e,"$model",Dt):e.$model=_t(e);for(var s=0,o=e.length;s<o;s++){var u=e[s]=Lt(e[s],0,1,1);Object(u)===u&&(u.$up=e)}return e}function Mt(e,t,n){wt?Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!1,configurable:!0}):e[t]=n}function _t(e){var t=avalon.type(e);if(t==="array"){var n=[];for(var r=0;r<e.length;r++)n[r]=_t(e[r]);return n}if(t==="object"){var i={};for(r in e){if(r==="__proxy__"||r==="__data__"||r==="__const__")continue;if(e.hasOwnProperty(r)){var s=e[r];i[r]=s&&s.nodeType?s:_t(s)}}return i}return e}function qt(e,t){var n={};for(var r=0,i=t.length;r<i;r++){n[r]=e[r];var s=t[r];s in n?(e[r]=n[s],delete n[s]):e[r]=e[s]}}function Rt(e){var t=[];for(var n=0;n<e;n++)t[n]=A("$proxy$each");return t}function Ut(e,t,n){switch(t){case"push":case"unshift":n=Rt(n.length);break;case"splice":if(n.length>2){var r=n[1],i=n.length-2;n=[n[0],n[1]].concat(Rt(n.length-2))}}Array.prototype[t].apply(e,n)}function Xt(){return new Date-0}function Vt(e,t){if(t.oneTime)return;e&&avalon.Array.ensure(e,t)&&t.element&&(Zt(t,e),new Date-Qt>444&&en())}function $t(e,t){var n=[];for(var r=0,i;i=e[r++];)n.push(t?i.$id:i.$key);return n.join(";")}function Yt(e){if(!e.uniqueNumber){var t=e.element;t?t.nodeType!==1?e.uniqueNumber=e.type+"-"+Yt(t.parentNode)+"-"+ ++Jt:e.uniqueNumber=e.name+"-"+Yt(t):e.uniqueNumber=++Jt}return e.uniqueNumber}function Zt(e,t){var n=e.lists||(e.lists=[]),r=Yt(e);avalon.Array.ensure(n,t),t.$uuid=t.$uuid||A(),Kt[r]||(Kt[r]=1,Kt.push(e))}function en(e){var t=Kt.length,n=t,r=[],i={},s={};while(e=Kt[--t]){var o=e.type;s[o]?s[o]++:(s[o]=1,r.push(o))}var u=!1;r.forEach(function(e){Gt[e]!==s[e]&&(i[e]=1,u=!0)}),t=n;if(u)while(e=Kt[--t]){if(e.element===null){Kt.splice(t,1);continue}if(i[e.type]&&nn(e.element)){Kt.splice(t,1),delete Kt[e.uniqueNumber];var a=e.lists;for(var f=0,l;l=a[f++];)avalon.Array.remove(a,l),avalon.Array.remove(l,e);tn(e)}}Gt=s,Qt=new Date}function tn(e){delete Kt[e.uniqueNumber],e.element=null,e.rollback&&e.rollback();for(var t in e)e[t]=null}function nn(e){try{var t=e.parentNode.nodeType}catch(n){return!0}return e.ifRemove&&!S.contains(e.ifRemove)&&s===e.parentNode?(e.parentNode&&e.parentNode.removeChild(e),!0):e.msRetain?0:e.nodeType===1?!S.contains(e):!avalon.contains(S,e)}function hn(e){var t=e.nodeName;return t.toLowerCase()===t&&e.scopeName&&e.outerText===""}function pn(e){e.currentStyle.behavior!=="url(#default#VML)"&&(e.style.behavior="url(#default#VML)",e.style.display="inline-block",e.style.zoom=1)}function dn(e){return e.replace(/([a-z\d])([A-Z]+)/g,"$1-$2").toLowerCase()}function vn(e){return!e||e.indexOf("-")<0&&e.indexOf("_")<0?e:e.replace(/[-_][^-_]/g,function(e){return e.charAt(1).toUpperCase()})}function gn(e){if(!("classList"in e)){e.classList={node:e};for(var t in mn)e.classList[t.slice(1)]=mn[t]}return e.classList}function yn(e){try{if(typeof e=="object")return e;e=e==="true"?!0:e==="false"?!1:e==="null"?null:+e+""===e?+e:bn.test(e)?avalon.parseJSON(e):e}catch(t){}return e}function Tn(e){return e.window&&e.document?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}function Bn(e,t){if(e.offsetWidth<=0){if(Hn.test(Nn["@:get"](e,"display"))){var n={node:e};for(var r in Pn)n[r]=e.style[r],e.style[r]=Pn[r];t.push(n)}var i=e.parentNode;i&&i.nodeType===1&&Bn(i,t)}}function jn(e){var t=e.tagName.toLowerCase();return t==="input"&&/checkbox|radio/.test(e.type)?"checked":t}function Wn(e,t){var n=[],r=!!t;t=t||0;var i="unknown",s="";for(var o=0;o<e.length;o++){var u=e.charAt(o);if(u==="'"||u==='"')i==="unknown"?i=u:i===u&&(i="unknown");else if(u==="\\")(i==="'"||i==='"')&&o++;else if(Un.test(u))i==="unknown"?(i="variable",s=u):i==="maybePath"?(s=n.pop(),s+="."+u,i="variable"):i==="variable"&&(s+=u);else if(/\w/.test(u))i==="variable"&&(s+=u);else if(u===".")i==="variable"&&s&&(n.push(s),s="",i="maybePath");else if(u==="["){if(i==="variable"||i==="maybePath"){s&&(n.push(s),s="");var a=n.length,f=n[a-1],l=Wn(e.slice(o),o);if(l.length)n[a-1]=f+".*",n=l.concat(n);else{var c=e.slice(o+1,l.i);try{var h=C(["return "+c])();n[a-1]=f+"."+h}catch(p){}}i="maybePath",o=l.i}}else if(u==="]"){if(r)return n.i=o+t,Xn(n,s),n}else zn.test(u)&&u!=="\r"&&u!=="\n"?i==="variable"&&(Xn(n,s)&&(i="maybePath"),s=""):(Xn(n,s),i="unknown",s="")}return Xn(n,s),n}function Xn(e,t){if(t&&!qn[t])return e.push(t),!0}function Vn(e,t,n,r){var i=[],s=" = "+n+".";for(var o=e.length,u;u=e[--o];){var a=u.split("."),f,l=a[0];while(f=a.shift())t.hasOwnProperty(f)&&(i.push(l+s+l),r.observers.push({v:t,p:u}),e.splice(o,1))}return i}function Qn(e){e=e.trim();var t=Jn.get(e);if(t)return t.concat();var n=Wn(e),r={},i=[];for(var s=0,o;o=n[s++];)r[o]||(r[o]=1,i.push(o));return Jn.put(e,i).concat()}function Gn(e,t,n){var r=n.filters;typeof r=="string"&&r.trim()&&!n._filters&&(n._filters=ir(r.trim()));var i=Qn(e),s=new Date-0,o=[],u=[],a=[];n.observers=[];for(var f=0,l=t.length;f<l;f++)if(i.length){var c="vm"+s+"_"+f;u.push(c),a.push(t[f]),o.push.apply(o,Vn(i,t[f],c,n))}n.args=a;var h=n.type,p=t.map(function(e){return String(e.$id).replace($n,"$1")})+e+h,d=Kn.get(p);if(d){if(h==="duplex"){var v=Kn.get(p+"setter");n.setter=v.apply(v,n.args)}return n.getter=d}o.length||o.push("fix"+s);if(h==="duplex"){var m={};o.forEach(function(e){var t=e.split("=");m[t[0].trim()]=t[1].trim()}),e=e.replace(/[\$\w]+/,function(e){return m[e]?m[e]:e});var g=C(u.concat("'use strict';return function(vvv){"+e+" = vvv\n}\n"));Kn.put(p+"setter",g),n.setter=g.apply(g,n.args)}if(h==="on"){e.indexOf("(")===-1?e+=".call(this, $event)":e=e.replace("(",".call(this,"),u.push("$event"),e="\nreturn "+e+";";var y=e.lastIndexOf("\nreturn"),b=e.slice(0,y),w=e.slice(y);e=b+"\n"+w}else e="\nreturn "+e+";";return d=C(u.concat("'use strict';\nvar "+o.join(",\n")+e)),Kn.put(p,d)}function Yn(e){var t=ut.test(e);if(t){var n=Fr(e);return n.length===1?n[0].expr:n.map(function(e){return e.type?"("+e.expr+")":or(e.expr)}).join(" + ")}return e}function ir(e){return e=e.replace(Zn,"").replace(er,function(){return"],|"}).replace(tr,function(e,t){return"["+or(t)}).replace(nr,function(){return'"],["'}).replace(rr,function(){return'",'})+"]",C(["return ["+e+"]"])()}function ar(e,t,n){var r=setTimeout(function(){var i=e.innerHTML;clearTimeout(r),i===n?t():ar(e,t,i)})}function fr(e,t){var n=e.getAttribute("avalonctrl")||t.$id;e.setAttribute("avalonctrl",n),t.$events&&(t.$events.expr=e.tagName+'[avalonctrl="'+n+'"]')}function cr(e,t){for(var n=0,r;r=e[n++];)r.vmodels=t,I[r.type].init(r),avalon.injectBinding(r),r.getter&&r.element.nodeType===1&&r.element.removeAttribute(r.name);e.length=0}function gr(e,t){return e.priority-t.priority}function yr(e,t,n){var r=!0;if(t.length){var i=Cr?Cr(e):e.attributes,s=[],o={};for(var a=0,f;f=i[a++];){var l=f.name;if(o[l])continue;o[l]=1;if(f.specified)if(n=l.match(dr)){var c=n[1],h=n[2]||"",p=f.value;vr[c]?(h=c,c="on"):mr[c]&&(h=c,c="attr",l="ms-"+c+"-"+h,u("warning!请改用"+l+"代替"+f.name+"!"));if(I[c]){var d=p.replace(pr,""),v=p!==d,m={type:c,param:h,element:e,name:l,expr:d,oneTime:v,uniqueNumber:f.name+"-"+Yt(e),priority:(I[c].priority||c.charCodeAt(0)*10)+(Number(h.replace(/\D/g,""))||0)};if(c==="html"||c==="text"){var g=jr(p).filters;m.expr=m.expr.replace(g,""),m.filters=g.replace(_r,function(){return m.type="html",m.group=1,""}).trim()}else if(c==="duplex")var y=l;else if(l==="ms-if-loop")m.priority+=100;else if(l==="ms-attr-value")var b=l;s.push(m)}}}if(s.length){s.sort(gr),y&&b&&e.nodeName==="INPUT"&&e.type==="text"&&u("warning!一个控件不能同时定义ms-attr-value与"+y);for(a=0;m=s[a];a++){c=m.type;if(br.test(c))return cr(s.slice(0,a+1),t);r&&(r=!wr.test(c))}cr(s,t)}}r&&!ur[e.tagName]&&(Vr(e)?e.msResolved:1)&&(hr&&hr(e),Ar(e,t))}function Lr(e){var t=Cr?Cr(e):e.attributes,n={};for(var r=0,i;i=t[r++];)i.specified&&!kr.test(i.name)&&(n[vn(i.name)]=yn(i.value));return n}function Ar(e,t){var n=avalon.slice(e.childNodes);Or(n,t)}function Or(e,t){for(var n=0,r;r=e[n++];)switch(r.nodeType){case 1:var i=r,s;if(!i.msResolved&&i.parentNode&&i.parentNode.nodeType===1){var o=Vr(i);if(o){var u=i.localName?i.localName.replace(o+":",""):i.nodeName,a=o+":"+vn(u);Ur.push({library:o,element:i,fullName:a,widget:u,vmodels:t,name:"widget"}),avalon.components[a]&&avalon.component(a)}}Mr(r,t),r.msHasEvent&&avalon.fireDom(r,"datasetchanged",{bubble:r.msHasEvent});break;case 3:ut.test(r.nodeValue)&&Ir(r,t,n)}}function Mr(e,t,n){var r=e.getAttribute("ms-skip");if(!e.getAttributeNode)return u("warning "+e.tagName+" no getAttributeNode method");var i=e.getAttributeNode("ms-important"),s=e.getAttributeNode("ms-controller");if(typeof r=="string")return;if(n=i||s){var o=avalon.vmodels[n.value];if(!o)return;t=n===i?[o]:[o].concat(t);var a=n.name;e.removeAttribute(a),avalon(e).removeClass(a),fr(e,o)}yr(e,t)}function jr(e){if(e.indexOf("|")>0){var t=e.replace(Br,function(e){return Array(e.length+1).join("1")}),n=t.replace(Dr,"ᄢ㍄").indexOf("|");if(n>-1)return{type:"text",filters:e.slice(n).trim(),expr:e.slice(0,n)}}return{type:"text",expr:e,filters:""}}function Fr(e){var t=[],n,r=0,i;do{i=e.indexOf(st,r);if(i===-1)break;n=e.slice(r,i),n&&t.push({expr:n}),r=i+st.length,i=e.indexOf(ot,r);if(i===-1)break;n=e.slice(r,i),n&&t.push(jr(n,r)),r=i+ot.length}while(1);return n=e.slice(r),n&&t.push({expr:n}),t}function Ir(e,t,n){var i=[],s=Fr(e.data);if(s.length){for(var o=0,u;u=s[o++];){var a=r.createTextNode(u.expr);u.type&&(u.expr=u.expr.replace(pr,function(){return u.oneTime=!0,""}),u.element=a,u.filters=u.filters.replace(_r,function(){return u.type="html",""}),u.pos=n*1e3+o,i.push(u)),x.appendChild(a)}e.parentNode.replaceChild(x,e),i.length&&cr(i,t)}}function Xr(e,t){if(t)for(var n=0,r;r=e[n++];)if(r.hasOwnProperty(t)&&typeof r[t]=="object"){var i=r[t];return i.$model||i}return{}}function Vr(e){if(e.scopeName&&e.scopeName!=="HTML")return e.scopeName;var t=e.nodeName.toLowerCase(),n=t.indexOf(":");if(n>0)return t.slice(0,n)}function ni(e){return e==null?"":e}function ri(e,t,n){return t.param.replace(h,function(r){var i=avalon.duplexHooks[r];i&&typeof i[n]=="function"&&(e=i[n](e,t))}),e}function oi(){for(var e=si.length-1;e>=0;e--){var t=si[e];t()===!1&&si.splice(e,1)}si.length||clearInterval(ii)}function ai(e,t,n){if(e.setSelectionRange)t=e.selectionStart,n=e.selectionEnd;else if(document.selection&&document.selection.createRange){var r=document.selection.createRange();t=0-r.duplicate().moveStart("character",-1e5),n=t+r.text.length}return{start:t,end:n}}function fi(e,t,n){if(!e.value||e.readOnly)return;e.createTextRange?setTimeout(function(){var n=e.createTextRange();n.collapse(!0),n.moveStart("character",t),n.select()},17):(e.selectionStart=t,e.selectionEnd=n)}function gi(e,t){if(!e||e.nodeType!==1)return null;if(t)var n=t.effectName,r=t.effectDriver;else n=e.getAttribute("data-effect-name"),r=e.getAttribute("data-effect-driver");if(!n||!r)return null;var i=mi.pop()||new Ei;return i.el=e,i.driver=r,i.useCss=r!=="j",i.useCss&&(t&&avalon(e).addClass(t.effectClass),i.cssEvent=r==="t"?hi:pi),i.name=n,i.callbacks=avalon.effects[n]||{},i}function yi(e,t){var n=e.getAttribute("data-effect-name");if(n){t.effectName=n,t.effectDriver=e.getAttribute("data-effect-driver");var r=+e.getAttribute("data-effect-stagger");t.effectLeaveStagger=+e.getAttribute("data-effect-leave-stagger")||r,t.effectEnterStagger=+e.getAttribute("data-effect-enter-stagger")||r,t.effectClass=e.className||NaN}}function bi(e){return e.replace(/^[\S]/g,function(e){return e.toUpperCase()})}function Ei(){}function Si(e,t){var n=e.callbacks[t+"Class"];return typeof n=="string"?n:typeof n=="function"?n():e.name+"-"+t}function xi(e,t,n){var r=e.callbacks[t];r&&r.call(e,e.el,n)}function Ai(e,t,n){var i=e.templateCache&&e.templateCache[t];if(i){var s=r.createDocumentFragment(),o;while(o=i.firstChild)s.appendChild(o);return s}return avalon.parseHTML(n)}function Oi(e){var t=r.createDocumentFragment();for(var n=0,i=e.length;n<i;n++)t.appendChild(e[n]);return t}function Di(e,t,n){for(var r=0,i;i=e[r++];)i.className===n.effectClass&&avalon.effect.apply(i,t,k,k,n)}function Pi(e,t,n){return e?setTimeout(t,++n*e):t(),n}function Hi(e,t){var n=x.cloneNode(!1),r=e,i=r.nodeValue,s=t&&Math.max(+t.staggerIndex,0),o=avalon.slice(r.parentNode.childNodes),u=o.indexOf(r);for(;;){var a=o[--u];if(!a||String(a.nodeValue).indexOf(i)===0)break;t&&a.className===t.effectClass?(e=a,function(e){t.staggerIndex=Pi(t.effectLeaveStagger,function(){avalon.effect.apply(e,0,k,function(){n.appendChild(e)},t)},s)}(a)):n.insertBefore(a,n.firstChild)}return n.appendChild(r),n}function Bi(e,t,n,r,i){var s=e.template.cloneNode(!0),o=avalon.slice(s.childNodes);s.appendChild(n.$anchor),i&&t.appendChild(s);var u=[n].concat(e.vmodels),a={nodes:o,vmodels:u,content:s};r.push(a)}function ji(e){var t=e.xtype==="object"?zi:Ii,n=t(e),r=n.$anchor||(n.$anchor=e.element.cloneNode(!1));return r.nodeValue=e.signature,n.$outer=e.$outer,n}function Ii(e,t){var n=e.param||"el";for(var r=0,i=Fi.length;r<i;r++){var s=Fi[r];if(s&&s.hasOwnProperty(n)){Fi.splice(r,1),t=s;break}}return t||(t=qi(n)),t}function qi(e){var t={$outer:{},$index:0,$oldIndex:0,$anchor:null,$first:!1,$last:!1,$remove:avalon.noop};t[e]=NaN;var n={$last:1,$first:1,$index:1};n[e]=1;var r=xt(t,{force:n});return r.$id=A("$proxy$each"),r}function Ri(e,t,n){if(n==="array"){e.$remove=function(){t.$repeat.removeAt(e.$index)};var r=t.param;e.$watch(r,function(n){var r=e.$index;t.$repeat[r]=n})}else e.$watch("$val",function(r){t.$repeat[e.$key]=r})}function zi(){return Ui.pop()||Wi()}function Wi(){var e=xt({$key:"",$val:NaN,$index:0,$oldIndex:0,$outer:{},$anchor:null},{force:{$key:1,$val:1,$index:1}});return e.$id=A("$proxy$with"),e}function Xi(e,t,n){var r=e[t];if(r){var i=r.$id.indexOf("$proxy$each")===0?Fi:Ui;r.$outer={};for(var s in r.$events){var o=r.$events[s];Array.isArray(o)&&(o.length=0,s===n?r[n]=NaN:s==="$val"&&(r.$val=NaN))}i.unshift(r)>it.maxRepeatSize&&i.pop(),delete e[t]}}function Vi(e,t){var n="_"+e;if(!Vi[n]){var i=r.createElement(e);S.appendChild(i),E?t=getComputedStyle(i,null).display:t=i.currentStyle.display,S.removeChild(i),Vi[n]=t}return Vi[n]}function Zi(e,t,n,r){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var i=isFinite(+e)?+e:0,s=isFinite(+t)?Math.abs(t):3,o=r||",",u=n||".",a="",f=function(e,t){var n=Math.pow(10,t);return""+(Math.round(e*n)/n).toFixed(t)};return a=(s?f(i,s):""+Math.round(i)).split("."),a[0].length>3&&(a[0]=a[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,o)),(a[1]||"").length<s&&(a[1]=a[1]||"",a[1]+=(new Array(s-a[1].length+1)).join("0")),a.join(u)}function is(){try{S.doScroll("left"),rs()}catch(e){setTimeout(is)}}var n=new Date-0,r=e.document,i=r.getElementsByTagName("head")[0],s=i.insertBefore(document.createElement("avalon"),i.firstChild);s.innerHTML="X<style id='avalonStyle'>.avalonHide{ display: none!important }</style>",s.setAttribute("ms-skip","1"),s.className="avalonHide";var o=/\[native code\]/,a="$"+n,f=!1,l={},c=/[^, ]+/g,h=/\w+/g,p=/^(?:object|array)$/,d=/^\[object SVG\w*Element\]$/,v=/^\[object (?:Window|DOMWindow|global)\]$/,m=Object.prototype,g=m.hasOwnProperty,y=m.toString,b=Array.prototype,w=b.slice,E=e.dispatchEvent,S=r.documentElement,x=r.createDocumentFragment(),T=r.createElement("div"),N={};"Boolean Number String Function Array Date RegExp Object Error".replace(c,function(e){N["[object "+e+"]"]=e.toLowerCase()});var A=function(e){return e=e||"avalon",String(Math.random()+Math.random()).replace(/\d\.\d{4}/,e)},M=O();avalon=function(e){return new avalon.init(e)},avalon.nextTick=new function(){function i(){var e=r.length;for(var t=0;t<e;t++)r[t]();r=r.slice(e)}var t=e.setImmediate,n=e.MutationObserver;if(t)return t.bind(e);var r=[];if(n){var s=document.createTextNode("avalon");(new n(i)).observe(s,{characterData:!0});var o=!1;return function(e){r.push(e),o=!o,s.data=o}}return function(e){setTimeout(e,4)}},avalon.init=function(e){this[0]=this.element=e},avalon.fn=avalon.prototype=avalon.init.prototype,avalon.type=function(e){return e==null?String(e):typeof e=="object"||typeof e=="function"?N[y.call(e)]||"object":typeof e};var _=typeof alert=="object"?function(e){try{return/^\s*\bfunction\b/.test(e+"")}catch(t){return!1}}:function(e){return y.call(e)==="[object Function]"};avalon.isFunction=_,avalon.isWindow=function(e){return e?e==e.document&&e.document!=e:!1},D(e)&&(avalon.isWindow=D);var P;for(P in avalon({}))break;var H=P!=="0";avalon.isPlainObject=function(e,t){if(!e||avalon.type(e)!=="object"||e.nodeType||avalon.isWindow(e))return!1;try{if(e.constructor&&!g.call(e,"constructor")&&!g.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(H)for(t in e)return g.call(e,t);for(t in e);return t===void 0||g.call(e,t)},o.test(Object.getPrototypeOf)&&(avalon.isPlainObject=function(e){return y.call(e)==="[object Object]"&&Object.getPrototypeOf(e)===m}),avalon.mix=avalon.fn.mix=function(){var e,t,n,r,i,s,o=arguments[0]||{},u=1,a=arguments.length,f=!1;typeof o=="boolean"&&(f=o,o=arguments[1]||{},u++),typeof o!="object"&&!_(o)&&(o={}),u===a&&(o=this,u--);for(;u<a;u++)if((e=arguments[u])!=null)for(t in e){n=o[t];try{r=e[t]}catch(l){continue}if(o===r)continue;f&&r&&(avalon.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,s=n&&Array.isArray(n)?n:[]):s=n&&avalon.isPlainObject(n)?n:{},o[t]=avalon.mix(f,s,r)):r!==void 0&&(o[t]=r)}return o},avalon.mix({rword:c,subscribers:a,version:1.55,ui:{},log:u,slice:E?function(e,t,n){return w.call(e,t,n)}:function(e,t,n){var r=[],i=e.length;n===void 0&&(n=i);if(typeof n=="number"&&isFinite(n)){t=B(t,i),n=B(n,i);for(var s=t;s<n;++s)r[s-t]=e[s]}return r},noop:k,error:function(e,t){throw(t||Error)(e)},oneObject:L,range:function(e,t,n){n||(n=1),t==null&&(t=e||0,e=0);var r=-1,i=Math.max(0,Math.ceil((t-e)/n)),s=new Array(i);while(++r<i)s[r]=e,e+=n;return s},eventHooks:{},bind:function(e,t,n,r){var i=avalon.eventHooks,s=i[t];typeof s=="object"&&(t=s.type||t,r=s.phase||!!r,n=s.fn?s.fn(e,n):n);var o=E?n:function(t){n.call(e,et(t))};return E?e.addEventListener(t,o,r):e.attachEvent("on"+t,o),o},unbind:function(e,t,n,r){var i=avalon.eventHooks,s=i[t],o=n||k;typeof s=="object"&&(t=s.type||t,r=s.phase||!!r),E?e.removeEventListener(t,o,r):e.detachEvent("on"+t,o)},css:function(e,t,n){e instanceof avalon&&(e=e[0]);var r=/[_-]/.test(t)?vn(t):t,i;t=avalon.cssName(r)||r;if(n===void 0||typeof n=="boolean"){i=Nn[r+":get"]||Nn["@:get"],t==="background"&&(t="backgroundColor");var s=i(e,t);return n===!0?parseFloat(s)||0:s}if(n==="")e.style[t]="";else{if(n==null||n!==n)return;isFinite(n)&&!avalon.cssNumber[r]&&(n+="px"),i=Nn[r+":set"]||Nn["@:set"],i(e,t,n)}},each:function(e,t){if(e){var n=0;if(q(e)){for(var r=e.length;n<r;n++)if(t(n,e[n])===!1)break}else for(n in e)if(e.hasOwnProperty(n)&&t(n,e[n])===!1)break}},getWidgetData:function(e,t){var n=avalon(e).data(),r={};for(var i in n)i.indexOf(t)===0&&(r[i.replace(t,"").replace(/\w/,function(e){return e.toLowerCase()})]=n[i]);return r},Array:{ensure:function(e,t){if(e.indexOf(t)===-1)return e.push(t)},removeAt:function(e,t){return!!e.splice(t,1).length},remove:function(e,t){var n=e.indexOf(t);return~n?avalon.Array.removeAt(e,n):!1}}});var j=avalon.bindingHandlers={},F=avalon.bindingExecutors={},I=avalon.directives={};avalon.directive=function(e,t){return j[e]=t.init=t.init||k,F[e]=t.update=t.update||k,I[e]=t};var R=new function(){function e(e){this.size=0,this.limit=e,this.head=this.tail=void 0,this._keymap={}}var t=e.prototype;return t.put=function(e,t){var n={key:e,value:t};return this._keymap[e]=n,this.tail?(this.tail.newer=n,n.older=this.tail):this.head=n,this.tail=n,this.size===this.limit?this.shift():this.size++,t},t.shift=function(){var e=this.head;e&&(this.head=this.head.newer,this.head.older=e.newer=e.older=this._keymap[e.key]=void 0,delete this._keymap[e.key])},t.get=function(e){var t=this._keymap[e];if(t===void 0)return;return t===this.tail?t.value:(t.newer&&(t===this.head&&(this.head=t.newer),t.newer.older=t.older),t.older&&(t.older.newer=t.newer),t.newer=void 0,t.older=this.tail,this.tail&&(this.tail.newer=t),this.tail=t,t.value)},e};if(!"司徒正美".trim){var U=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(U,"")}}var z=!{toString:null}.propertyIsEnumerable("toString"),W=function(){}.propertyIsEnumerable("prototype"),X=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],V=X.length;Object.keys||(Object.keys=function(e){var t=[],n=W&&typeof e=="function";if(typeof e=="string"||e&&e.callee)for(var r=0;r<e.length;++r)t.push(String(r));else for(var i in e)(!n||i!=="prototype")&&g.call(e,i)&&t.push(String(i));if(z){var s=e.constructor,o=s&&s.prototype===e;for(var u=0;u<V;u++){var a=X[u];(!o||a!=="constructor")&&g.call(e,a)&&t.push(a)}}return t}),Array.isArray||(Array.isArray=function(e){return y.call(e)==="[object Array]"}),k.bind||(Function.prototype.bind=function(e){if(arguments.length<2&&e===void 0)return this;var t=this,n=arguments;return function(){var r=[],i;for(i=1;i<n.length;i++)r.push(n[i]);for(i=0;i<arguments.length;i++)r.push(arguments[i]);return t.apply(e,r)}}),o.test([].map)||avalon.mix(b,{indexOf:function(e,t){var n=this.length,r=~~t;r<0&&(r+=n);for(;r<n;r++)if(this[r]===e)return r;return-1},lastIndexOf:function(e,t){var n=this.length,r=t==null?n-1:t;r<0&&(r=Math.max(0,n+r));for(;r>=0;r--)if(this[r]===e)return r;return-1},forEach:$("","_",""),filter:$("r=[],j=0,","if(_)r[j++]=this[i]","return r"),map:$("r=[],","r[i]=_","return r"),some:$("","if(_)return true","return false"),every:$("","if(!_)return false","return true")}),avalon.contains=J,r.contains||(r.contains=function(e){return J(r,e)});if(e.SVGElement){r.createTextNode("x").contains||(Node.prototype.contains=function(e){return!!(this.compareDocumentPosition(e)&16)});var Q="http://www.w3.org/2000/svg",G=r.createElementNS(Q,"svg");G.innerHTML='<circle cx="50" cy="50" r="40" fill="red" />';if(!d.test(G.firstChild)){function Y(e,t){if(e&&e.childNodes){var n=e.childNodes;for(var i=0,s;s=n[i++];)if(s.tagName){var o=r.createElementNS(Q,s.tagName.toLowerCase());b.forEach.call(s.attributes,function(e){o.setAttribute(e.name,e.value)}),Y(s,o),t.appendChild(o)}}}Object.defineProperties(SVGElement.prototype,{outerHTML:{enumerable:!0,configurable:!0,get:K,set:function(e){var t=this.tagName.toLowerCase(),n=this.parentNode,i=avalon.parseHTML(e);if(t==="svg")n.insertBefore(i,this);else{var s=r.createDocumentFragment();Y(i,s),n.insertBefore(s,this)}n.removeChild(this)}},innerHTML:{enumerable:!0,configurable:!0,get:function(){var e=this.outerHTML,t=new RegExp("<"+this.nodeName+'\\b(?:(["\'])[^"]*?(\\1)|[^>])*>',"i"),n=new RegExp("</"+this.nodeName+">$","i");return e.replace(t,"").replace(n,"")},set:function(e){if(avalon.clearHTML){avalon.clearHTML(this);var t=avalon.parseHTML(e);Y(t,this)}}}})}}!S.outerHTML&&e.HTMLElement&&HTMLElement.prototype.__defineGetter__("outerHTML",K);var Z=/^(?:mouse|contextmenu|drag)|click/,tt=avalon.eventHooks;"onmouseenter"in S||avalon.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){tt[e]={type:t,fn:function(t,n){return function(r){var i=r.relatedTarget;if(!i||i!==t&&!(t.compareDocumentPosition(i)&16))return delete r.type,r.type=e,n.call(t,r)}}}}),avalon.each({AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"},function(t,n){e[t]&&!tt.animationend&&(tt.animationend={type:n})}),"oninput"in r.createElement("input")||(tt.input={type:"propertychange",deel:function(e,t){return function(n){if(n.propertyName==="value")return n.type="input",t.call(e,n)}}});if(r.onmousewheel===void 0){var nt=r.onwheel!==void 0?"wheel":"DOMMouseScroll",rt=nt==="wheel"?"deltaY":"detail";tt.mousewheel={type:nt,fn:function(e,t){return function(n){n.wheelDeltaY=n.wheelDelta=n[rt]>0?-120:120,n.wheelDeltaX=0,Object.defineProperty&&Object.defineProperty(n,"type",{value:"mousewheel"}),t.call(e,n)}}}}var st,ot,ut,at,ft,lt=/[-.*+?^${}()|[\]\/\\]/g,ht={interpolate:function(e){st=e[0],ot=e[1];if(st===ot){throw new SyntaxError("openTag!==closeTag");var t}it.openTag=st,it.closeTag=ot;var n=ct(st),r=ct(ot);ut=new RegExp(n+"(.*?)"+r),at=new RegExp(n+"(.*?)"+r,"g"),ft=new RegExp(n+".*?"+r+"|\\sms-")}};it.async=!0,it.debug=!0,it.plugins=ht,it.plugins.interpolate(["{{","}}"]),it.paths={},it.shim={},it.maxRepeatSize=100,avalon.config=it;var gt=avalon.vmodels={};avalon.define=function(e){var t=e.$id;t||u("warning: vm必须指定$id");var n=xt(e);return n.$id=t,gt[t]=n};var yt=L("$id,$watch,$fire,$events,$model,$skipArray,$active,$pathname,$up,$track,$accessors,$ups"),bt=Object.defineProperty,wt=!0;try{bt({},"_",{value:"x"});var Et=Object.defineProperties}catch(St){wt=!1}var At=o.test(Object.key)?Object.key:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&!yt[n]&&t.push(n);return t},Dt={get:function(){return _t(this)},set:k,enumerable:!1,configurable:!0};if(!wt){"__defineGetter__"in avalon&&(bt=function(e,t,n){return"value"in n&&(e[t]=n.value),"get"in n&&e.__defineGetter__(t,n.get),"set"in n&&e.__defineSetter__(t,n.set),e},Et=function(e,t){for(var n in t)t.hasOwnProperty(n)&&bt(e,n,t[n]);return e});if(M){var Pt={};e.execScript(["Function parseVB(code)","	ExecuteGlobal(code)","End Function"].join("\n"),"VBScript");function Ht(e,t,n,r){var i=t[n];if(arguments.length!==4)return i.get.call(e);i.set.call(e,r)}Et=function(t,r,i){var s=[];s.push("\r\n	Private [__data__], [__proxy__]","	Public Default Function [__const__](d"+n+", p"+n+")","		Set [__data__] = d"+n+": set [__proxy__] = p"+n,"		Set [__const__] = Me","	End Function");var o={};for(t in r)o[t]=!0,s.push("	Public Property Let ["+t+"](val"+n+")",'		Call [__proxy__](Me,[__data__], "'+t+'", val'+n+")","	End Property","	Public Property Set ["+t+"](val"+n+")",'		Call [__proxy__](Me,[__data__], "'+t+'", val'+n+")","	End Property","	Public Property Get ["+t+"]","	On Error Resume Next","		Set["+t+'] = [__proxy__](Me,[__data__],"'+t+'")',"	If Err.Number <> 0 Then","		["+t+'] = [__proxy__](Me,[__data__],"'+t+'")',"	End If","	On Error Goto 0","	End Property");for(t in i)o[t]!==!0&&(o[t]=!0,s.push("	Public ["+t+"]"));for(t in yt)o[t]!==!0&&(o[t]=!0,s.push("	Public ["+t+"]"));s.push("	Public [hasOwnProperty]"),s.push("End Class");var u=s.join("\r\n"),a=Pt[u];a||(a=A("VBClass"),e.parseVB("Class "+a+u),e.parseVB(["Function "+a+"Factory(a, b)","	Dim o","	Set o = (New "+a+")(a, b)","	Set "+a+"Factory = o","End Function"].join("\r\n")),Pt[u]=a);var f=e[a+"Factory"](r,Ht);return f}}}var Bt=["push","pop","shift","unshift","splice"],jt=Array.prototype,Ft={notify:function(){dt.call(this.$up,this.$pathname)},set:function(e,t){if(e>>>0===e&&this[e]!==t){if(e>this.length)throw Error(e+"set方法的第一个参数不能大于原数组长度");dt.call(this.$up,this.$pathname+".*",[t,this[e]]),this.splice(e,1,t)}},contains:function(e){return this.indexOf(e)!==-1},ensure:function(e){return this.contains(e)||this.push(e),this},pushArray:function(e){return this.push.apply(this,e)},remove:function(e){return this.removeAt(this.indexOf(e))},removeAt:function(e){return e>>>0===e?this.splice(e,1):[]},size:function(){return this._.length},removeAll:function(e){if(Array.isArray(e))for(var t=this.length-1;t>=0;t--)e.indexOf(this[t])!==-1&&(It.call(this.$track,t,1),It.call(this,t,1));else if(typeof e=="function")for(t=this.length-1;t>=0;t--){var n=this[t];e(n,t)&&(It.call(this.$track,t,1),It.call(this,t,1))}else It.call(this.$track,0,this.length),It.call(this,0,this.length);E||(this.$model=_t(this)),this.notify(),this._.length=this.length},clear:function(){return this.removeAll()}},It=jt.splice;Bt.forEach(function(e){var t=jt[e];Ft[e]=function(){var n=[];for(var r=0,i=arguments.length;r<i;r++)n[r]=Lt(arguments[r],0,1,1);var s=t.apply(this,n);return Ut(this.$track,e,n),E||(this.$model=_t(this)),this.notify(),this._.length=this.length,s}}),"sort,reverse".replace(c,function(e){Ft[e]=function(){var t=this.concat(),n=this,r=Math.random(),i=[],s=!1;jt[e].apply(n,arguments);for(var o=0,u=t.length;o<u;o++){var a=n[o],f=t[o];if(a===f)i.push(o);else{var l=t.indexOf(a);i.push(l),t[l]=r,s=!0}}return s&&(qt(this.$track,i),E||(this.$model=_t(this)),this.notify()),this}});var zt=function(){var e=[],t;return{begin:function(n){e.push(t),t=n},end:function(){t=e.pop()},collectDependency:function(e){t&&t.callback(e)}}}(),Wt=/^on$/;avalon.injectBinding=function(e){e.handler=e.handler||I[e.type].update||k,e.update=function(){var t=!1;e.getter||(t=!0,zt.begin({callback:function(t){Vt(t,e)}}),e.getter=Gn(e.expr,e.vmodels,e),e.observers.forEach(function(t){t.v.$watch(t.p,e)}),delete e.observers);try{var n=e.fireArgs,r,i;delete e.fireArgs,n?(r=n[0],i=n[1]):e.type==="on"?r=e.getter+"":r=e.getter.apply(0,e.args),i=typeof i=="undefined"?e.oldValue:i,e._filters&&(r=es.$filter.apply(0,[r].concat(e._filters)));if(e.signature){var s=avalon.type(r);if(s!=="array"&&s!=="object")throw Error("warning:"+e.expr+"只能是对象或数组");e.xtype=s;var o=$t(e.proxies||[],s),a=r.$track||(s==="array"?Rt(r.length):Object.keys(r));e.track=a,o!==a.join(";")&&(e.handler(r,i),e.oldValue=1)}else if(Array.isArray(r)?r.length!==(i&&i.length):!1)e.handler(r,i),e.oldValue=r.concat();else if(!("oldValue"in e)||r!==i)e.handler(r,i),e.oldValue=r}catch(f){delete e.getter,u("warning:exception throwed in [avalon.injectBinding] ",f);var l=e.element;l&&l.nodeType===3&&(l.nodeValue=st+(e.oneTime?"::":"")+e.expr+ot)}finally{t&&zt.end()}},e.update()};var Jt=0,Kt=avalon.$$subscribers=[],Qt=new Date,Gt={},rn={area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],col:[2,"<table><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],tr:[2,"<table>","</table>"],td:[3,"<table><tr>","</tr></table>"],g:[1,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">',"</svg>"],_default:E?[0,"",""]:[1,"X<div>","</div>"]};rn.th=rn.td,rn.optgroup=rn.option,rn.tbody=rn.tfoot=rn.colgroup=rn.caption=rn.thead,String("circle,defs,ellipse,image,line,path,polygon,polyline,rect,symbol,text,use").replace(c,function(e){rn[e]=rn.g});var sn=/<([\w:]+)/,on=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,un=E?/[^\d\D]/:/(<(?:script|link|style|meta|noscript))/ig,an=L(["","text/javascript","text/ecmascript","application/ecmascript","application/javascript"]),fn=/<(?:tb|td|tf|th|tr|col|opt|leg|cap|area)/,ln=r.createElement("script"),cn=/<|&#?\w+;/;avalon.parseHTML=function(e){var t=x.cloneNode(!1);if(typeof e!="string")return t;if(!cn.test(e))return t.appendChild(r.createTextNode(e)),t;e=e.replace(on,"<$1></$2>").trim();var n=(sn.exec(e)||["",""])[1].toLowerCase(),i=rn[n]||rn._default,s=T,o,u;E||(e=e.replace(un,"<br class=msNoScope>$1")),s.innerHTML=i[1]+e+i[2];var a=s.getElementsByTagName("script");if(a.length)for(var f=0,l;l=a[f++];)an[l.type]&&(u=ln.cloneNode(!1),b.forEach.call(l.attributes,function(e){e&&e.specified&&(u[e.name]=e.value,u.setAttribute(e.name,e.value))}),u.text=l.text,l.parentNode.replaceChild(u,l));if(!E){var c=i[1]==="X<div>"?s.lastChild.firstChild:s.lastChild;if(c&&c.tagName==="TABLE"&&n!=="tbody")for(a=c.childNodes,f=0;l=a[f++];)if(l.tagName==="TBODY"&&!l.innerHTML){c.removeChild(l);break}a=s.getElementsByTagName("br");var h=a.length;while(l=a[--h])l.className==="msNoScope"&&l.parentNode.removeChild(l);for(a=s.all,f=0;l=a[f++];)hn(l)&&pn(l)}for(f=i[0];f--;s=s.lastChild);while(o=s.firstChild)t.appendChild(o);return t},avalon.innerHTML=function(e,t){if(!E&&!un.test(t)&&!fn.test(t))try{e.innerHTML=t;return}catch(n){}var r=this.parseHTML(t);this.clearHTML(e).appendChild(r)},avalon.clearHTML=function(e){e.textContent="";while(e.firstChild)e.removeChild(e.firstChild);return e};var mn={_toString:function(){var e=this.node,t=e.className,n=typeof t=="string"?t:t.baseVal;return n.split(/\s+/).join(" ")},_contains:function(e){return(" "+this+" ").indexOf(" "+e+" ")>-1},_add:function(e){this.contains(e)||this._set(this+" "+e)},_remove:function(e){this._set((" "+this+" ").replace(" "+e+" "," "))},__set:function(e){e=e.trim();var t=this.node;d.test(t)?t.setAttribute("class",e):t.className=e}};"add,remove".replace(c,function(e){avalon.fn[e+"Class"]=function(t){var n=this[0];return t&&typeof t=="string"&&n&&n.nodeType===1&&t.replace(/\S+/g,function(t){gn(n)[e](t)}),this}}),avalon.fn.mix({hasClass:function(e){var t=this[0]||{};return t.nodeType===1&&gn(t).contains(e)},toggleClass:function(e,t){var n,r=0,i=String(e).split(/\s+/),s=typeof t=="boolean";while(n=i[r++]){var o=s?t:!this.hasClass(n);this[o?"addClass":"removeClass"](n)}return this},attr:function(e,t){return arguments.length===2?(this[0].setAttribute(e,t),this):this[0].getAttribute(e)},data:function(e,t){e="data-"+dn(e||"");switch(arguments.length){case 2:return this.attr(e,t),this;case 1:var n=this.attr(e);return yn(n);case 0:var r={};return b.forEach.call(this[0].attributes,function(t){t&&(e=t.name,e.indexOf("data-")||(e=vn(e.slice(5)),r[e]=yn(t.value)))}),r}},removeData:function(e){return e="data-"+dn(e),this[0].removeAttribute(e),this},css:function(e,t){if(avalon.isPlainObject(e))for(var n in e)avalon.css(this,n,e[n]);else var r=avalon.css(this,e,t);return r!==void 0?r:this},position:function(){var e,t,n=this[0],r={top:0,left:0};if(!n)return;return this.css("position")==="fixed"?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),e[0].tagName!=="HTML"&&(r=e.offset()),r.top+=avalon.css(e[0],"borderTopWidth",!0),r.left+=avalon.css(e[0],"borderLeftWidth",!0),r.top-=e.scrollTop(),r.left-=e.scrollLeft()),{top:t.top-r.top-avalon.css(n,"marginTop",!0),left:t.left-r.left-avalon.css(n,"marginLeft",!0)}},offsetParent:function(){var e=this[0].offsetParent;while(e&&avalon.css(e,"position")==="static")e=e.offsetParent;return avalon(e||S)},bind:function(e,t,n){if(this[0])return avalon.bind(this[0],e,t,n)},unbind:function(e,t,n){return this[0]&&avalon.unbind(this[0],e,t,n),this},val:function(e){var t=this[0];if(t&&t.nodeType===1){var n=arguments.length===0,r=n?":get":":set",i=In[jn(t)+r];if(i)var s=i(t,e);else{if(n)return(t.value||"").replace(/\r/g,"");t.value=e}}return n?s:this}});var bn=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,wn=/^[\],:{}\s]*$/,En=/(?:^|:|,)(?:\s*\[)+/g,Sn=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,xn=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g;avalon.parseJSON=e.JSON?JSON.parse:function(e){if(typeof e=="string"){e=e.trim();if(e&&wn.test(e.replace(Sn,"@").replace(xn,"]").replace(En,"")))return(new Function("return "+e))();avalon.error("Invalid JSON: "+e)}return e},avalon.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){avalon.fn[e]=function(n){var r=this[0]||{},i=Tn(r),s=e==="scrollTop";if(!arguments.length)return i?t in i?i[t]:S[e]:r[e];i?i.scrollTo(s?avalon(i).scrollLeft():n,s?n:avalon(i).scrollTop()):r[e]=n}});var Nn=avalon.cssHooks={},Cn=["","-webkit-","-o-","-moz-","-ms-"],kn={"float":E?"cssFloat":"styleFloat"};avalon.cssNumber=L("animationIterationCount,columnCount,order,flex,flexGrow,flexShrink,fillOpacity,fontWeight,lineHeight,opacity,orphans,widows,zIndex,zoom"),avalon.cssName=function(e,t,n){if(kn[e])return kn[e];t=t||S.style;for(var r=0,i=Cn.length;r<i;r++){n=vn(Cn[r]+e);if(n in t)return kn[e]=n}return null},Nn["@:set"]=function(e,t,n){try{e.style[t]=n}catch(r){}};if(e.getComputedStyle)Nn["@:get"]=function(e,t){if(!e||!e.style)throw new Error("getComputedStyle要求传入一个节点 "+e);var n,r=getComputedStyle(e,null);return r&&(n=t==="filter"?r.getPropertyValue(t):r[t],n===""&&(n=e.style[t])),n},Nn["opacity:get"]=function(e){var t=Nn["@:get"](e,"opacity");return t===""?"1":t};else{var Ln=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,An=/^(top|right|bottom|left)$/,On=/alpha\([^)]*\)/i,Mn=!!e.XDomainRequest,_n="DXImageTransform.Microsoft.Alpha",Dn={thin:Mn?"1px":"2px",medium:Mn?"3px":"4px",thick:Mn?"5px":"6px"};Nn["@:get"]=function(e,t){var n=e.currentStyle,r=n[t];if(Ln.test(r)&&!An.test(r)){var i=e.style,s=i.left,o=e.runtimeStyle.left;e.runtimeStyle.left=n.left,i.left=t==="fontSize"?"1em":r||0,r=i.pixelLeft+"px",i.left=s,e.runtimeStyle.left=o}return r==="medium"&&(t=t.replace("Width","Style"),n[t]==="none"&&(r="0px")),r===""?"auto":Dn[r]||r},Nn["opacity:set"]=function(e,t,n){var r=e.style,i=isFinite(n)&&n<=1?"alpha(opacity="+n*100+")":"",s=r.filter||"";r.zoom=1,r.filter=(On.test(s)?s.replace(On,i):s+" "+i).trim(),r.filter||r.removeAttribute("filter")},Nn["opacity:get"]=function(e){var t=e.filters.alpha||e.filters[_n],n=t&&t.enabled?t.opacity:100;return n/100+""}}"top,left".replace(c,function(e){Nn[e+":get"]=function(t){var n=Nn["@:get"](t,e);return/px$/.test(n)?n:avalon(t).position()[e]+"px"}});var Pn={position:"absolute",visibility:"hidden",display:"block"},Hn=/^(none|table(?!-c[ea]).+)/;"Width,Height".replace(c,function(e){var t=e.toLowerCase(),n="client"+e,r="scroll"+e,i="offset"+e;Nn[t+":get"]=function(t,n,r){var s=-4;typeof r=="number"&&(s=r),n=e==="Width"?["Left","Right"]:["Top","Bottom"];var o=t[i];return s===2?o+avalon.css(t,"margin"+n[0],!0)+avalon.css(t,"margin"+n[1],!0):(s<0&&(o=o-avalon.css(t,"border"+n[0]+"Width",!0)-avalon.css(t,"border"+n[1]+"Width",!0)),s===-4&&(o=o-avalon.css(t,"padding"+n[0],!0)-avalon.css(t,"padding"+n[1],!0)),o)},Nn[t+"&get"]=function(e){var n=[];Bn(e,n);var r=Nn[t+":get"](e);for(var i=0,s;s=n[i++];){e=s.node;for(var o in s)typeof s[o]=="string"&&(e.style[o]=s[o])}return r},avalon.fn[t]=function(s){var o=this[0];if(arguments.length===0){if(o.setTimeout)return o["inner"+e]||o.document.documentElement[n]||o.document.body[n];if(o.nodeType===9){var u=o.documentElement;return Math.max(o.body[r],u[r],o.body[i],u[i],u[n])}return Nn[t+"&get"](o)}return this.css(t,s)},avalon.fn["inner"+e]=function(){return Nn[t+":get"](this[0],void 0,-2)},avalon.fn["outer"+e]=function(e){return Nn[t+":get"](this[0],void 0,e===!0?2:0)}}),avalon.fn.offset=function(){var e=this[0],t={left:0,top:0};if(!e||!e.tagName||!e.ownerDocument)return t;var n=e.ownerDocument,r=n.body,i=n.documentElement,s=n.defaultView||n.parentWindow;if(!avalon.contains(i,e))return t;e.getBoundingClientRect&&(t=e.getBoundingClientRect());var o=i.clientTop||r.clientTop,u=i.clientLeft||r.clientLeft,a=Math.max(s.pageYOffset||0,i.scrollTop,r.scrollTop),f=Math.max(s.pageXOffset||0,i.scrollLeft,r.scrollLeft);return{top:t.top+a-o,left:t.left+f-u}};var Fn=/^<option(?:\s+\w+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s>]+))?)*\s+value[\s=]/i,In={"option:get":M?function(e){return Fn.test(e.outerHTML)?e.value:e.text.trim()}:function(e){return e.value},"select:get":function(e,t){var n,r=e.options,i=e.selectedIndex,s=In["option:get"],o=e.type==="select-one"||i<0,u=o?null:[],a=o?i+1:r.length,f=i<0?a:o?i:0;for(;f<a;f++){n=r[f];if((n.selected||f===i)&&!n.disabled){t=s(n);if(o)return t;u.push(t)}}return u},"select:set":function(e,t,n){t=[].concat(t);var r=In["option:get"];for(var i=0,s;s=e.options[i++];)if(s.selected=t.indexOf(r(s))>-1)n=!0;n||(e.selectedIndex=-1)}},qn={},Rn=["break,case,catch,continue,debugger,default,delete,do,else,false","finally,for,function,if,in,instanceof,new,null,return,switch,this","throw,true,try,typeof,var,void,while,with","abstract,boolean,byte,char,class,const,double,enum,export,extends","final,float,goto,implements,import,int,interface,long,native","package,private,protected,public,short,static,super,synchronized","throws,transient,volatile","arguments,let,yield,undefined"].join(",");Rn.replace(/\w+/g,function(e){qn[e]=!0});var Un=/[a-z_$]/i,zn=/[\s\uFEFF\xA0]/,$n=/(\$proxy\$[a-z]+)\d+$/,Jn=new R(218),Kn=new R(128);avalon.normalizeExpr=Yn,avalon.parseExprProxy=Gn;var Zn=/\)\s*$/,er=/\)\s*\|/g,tr=/\|\s*([$\w]+)/g,nr=/"\s*\["/g,rr=/"\s*\(/g,sr={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},or=e.JSON&&JSON.stringify||function(e){return'"'+e.replace(/[\\\"\x00-\x1f]/g,function(e){var t=sr[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"'};avalon.scan=function(e,t){e=e||S;var n=t?[].concat(t):[];Mr(e,n)};var ur=L("area,base,basefont,br,col,command,embed,hr,img,input,link,meta,param,source,track,wbr,noscript,script,style,textarea".toUpperCase()),lr=function(e,t,n){var r=e.getAttribute(t);if(r)for(var i=0,s;s=n[i++];)if(s.hasOwnProperty(r)&&typeof s[r]=="function")return s[r]},hr=M&&e.MutationObserver?function(e){var t=e.firstChild,n;while(t){var r=t.nextSibling;t.nodeType===3?n?(n.nodeValue+=t.nodeValue,e.removeChild(t)):n=t:n=null,t=r}}:0,pr=/^\s*::/,dr=/ms-(\w+)-?(.*)/,vr=L("animationend,blur,change,input,click,dblclick,focus,keydown,keypress,keyup,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,scan,scroll,submit"),mr=L("value,title,alt,checked,selected,disabled,readonly,enabled,href,src"),br=/^if|widget|repeat$/,wr=/^each|with|html|include$/;if(!E)var Er=new R(512),Sr=/\s+([^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g,xr=/^['"]/,Tr=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/i,Nr=/&amp;/g,Cr=function(e){var t=e.outerHTML;if(t.slice(0,2)==="</"||!t.trim())return[];var n=t.match(Tr)[0],r=[],i,s,o=Er.get(n);if(o)return o;while(i=Sr.exec(n)){s=i[2],s&&(s=(xr.test(s)?s.slice(1,-1):s).replace(Nr,"&"));var u=i[1].toLowerCase();match=u.match(dr);var a={name:u,specified:!0,value:s||""};r.push(a)}return Er.put(n,r)};var kr=/^(ms-\S+|data-\S+|on[a-z]+|id|style|class|tabindex)$/,_r=/\|\s*html(?:\b|$)/,Dr=/\|\|/g,Pr=/&lt;/g,Hr=/&gt;/g,Br=/(['"])(\\\1|.)+?\1/g,qr=function(){this.queue=[]};qr.prototype={render:function(e){if(!this.locked){this.locked=e?S.offsetHeight+10:1;var t=this;avalon.nextTick(function(){t.flush()})}},flush:function(){for(var e=0,t;t=this.queue[e++];)t.update&&t.update();this.locked=0,this.queue=[]}};var Rr=new qr,Ur=[],zr=[],Wr={$construct:function(){return avalon.mix.apply(null,arguments)},$ready:k,$init:k,$dispose:k,$container:null,$childReady:k,$replace:!1,$extend:null,$$template:function(e){return e}};avalon.components={},avalon.component=function(t,n){n&&(avalon.components[t]=avalon.mix({},Wr,n));for(var r=0,i;i=Ur[r];r++)t===i.fullName&&(Ur.splice(r,1),r--,function(n,r,i,s){var o=1,u=n.library,a=avalon.libraries[u]||Wr,f=Lr(i),l=Xr(n.vmodels,f.config||n.widget),c=f.$id||f.identifier||A(s);delete f.config,delete f.$id,delete f.identifier;var h={},p=avalon.components[r.$extend];p?(avalon.mix(!0,h,p),h=p.$construct.call(i,h,{},{})):avalon.mix(!0,h,r),h=avalon.components[t].$construct.call(i,h,l,f),h.$refs={},h.$id=c;var d=h.$slot,v=h.$replace,m=h.$container,g=h.$template;delete h.$slot,delete h.$replace,delete h.$container,delete h.$construct;var y=avalon.define(h)||{};i.msResolved=1,y.$init(y,i),a.$init(y,i);var b=i.childNodes,w={},E;for(var S=0,T;T=b[S++];){var N=T.nodeType===1&&T.getAttribute("slot")||d;N&&(w[N]?w[N].push(T):w[N]=[T])}y.$$template&&(avalon.clearHTML(i),i.innerHTML=y.$$template(g));for(S in w)if(y.hasOwnProperty(S)){var C=w[S];if(C.length){var k=x.cloneNode(!0);for(var L=0;E=C[L++];)k.appendChild(E);y[S]=k}w[S]=null}w=null;var O=i.firstChild;v&&(O=i.firstChild,i.parentNode.replaceChild(O,i),O.msResolved=1,i=n.element=O),m&&m.appendChild(i),avalon.fireDom(i,"datasetchanged",{library:u,vm:y,childReady:1});var M=0,_=avalon.bind(i,"datasetchanged",function(t){t.childReady&&t.library===u&&(o+=t.childReady,y!==t.vm&&(y.$refs[t.vm.$id]=t.vm,t.childReady===-1&&(M++,y.$childReady(y,i,t)),t.stopPropagation()));if(o===0){var r=setTimeout(function(){clearTimeout(r),y.$ready(y,i,n.vmodels),a.$ready(y,i,n.vmodels)},M?Math.max(M*17,100):17);avalon.unbind(i,"datasetchanged",_),n.rollback=function(){try{y.$dispose(y,i),a.$dispose(y,i)}catch(e){}delete avalon.vmodels[y.$id]},Zt(n,zr),e.chrome&&i.addEventListener("DOMNodeRemovedFromDocument",function(){setTimeout(en)})}});Mr(i,[y].concat(n.vmodels)),avalon.vmodels[y.$id]=y;if(!i.childNodes.length)avalon.fireDom(i,"datasetchanged",{library:u,vm:y,childReady:-1});else var D=setTimeout(function(){clearTimeout(D),avalon.fireDom(i,"datasetchanged",{library:u,vm:y,childReady:-1})},17)}(i,avalon.components[t],i.element,i.widget))},avalon.fireDom=function(e,t,n){if(r.createEvent){var i=r.createEvent("Events");i.initEvent(t,!0,!0,n),avalon.mix(i,n),e.dispatchEvent(i)}else S.contains(e)&&(i=r.createEventObject(),avalon.mix(i,n),e.fireEvent("on"+t,i))},avalon.libraries=[],avalon.library=function(e,t){r.namespaces&&r.namespaces.add(e,"http://www.w3.org/1999/xhtml"),avalon.libraries[e]=avalon.mix({$init:k,$ready:k,$dispose:k},t||{})},avalon.library("ms");var $r=["autofocus,autoplay,async,allowTransparency,checked,controls","declare,disabled,defer,defaultChecked,defaultSelected","contentEditable,isMap,loop,multiple,noHref,noResize,noShade","open,readOnly,selected"].join(","),Jr={};$r.replace(c,function(e){Jr[e.toLowerCase()]=e});var Kr={"accept-charset":"acceptCharset","char":"ch",charoff:"chOff","class":"className","for":"htmlFor","http-equiv":"httpEquiv"},Qr=["accessKey,bgColor,cellPadding,cellSpacing,codeBase,codeType,colSpan","dateTime,defaultValue,frameBorder,longDesc,maxLength,marginWidth,marginHeight","rowSpan,tabIndex,useMap,vSpace,valueType,vAlign"].join(",");Qr.replace(c,function(e){Kr[e.toLowerCase()]=e});var Gr=avalon.directive("attr",{init:function(e){e.expr=Yn(e.expr.trim());if(e.type==="include"){var t=e.element;yi(t,e),e.includeRendered=lr(t,"data-include-rendered",e.vmodels),e.includeLoaded=lr(t,"data-include-loaded",e.vmodels);var n=e.includeReplace=!!avalon(t).data("includeReplace");avalon(t).data("includeCache")&&(e.templateCache={}),e.start=r.createComment("ms-include"),e.end=r.createComment("ms-include-end"),n?(e.element=e.end,e._element=t,t.parentNode.insertBefore(e.start,t),t.parentNode.insertBefore(e.end,t.nextSibling)):(t.insertBefore(e.start,t.firstChild),t.appendChild(e.end))}},update:function(t){var n=this.element,i=this.param;if(i==="href"||i==="src"){typeof t=="string"&&!S.hasAttribute&&(t=t.replace(/&amp;/g,"&")),n[i]=t;if(e.chrome&&n.tagName==="EMBED"){var s=n.parentNode,o=document.createComment("ms-src");s.replaceChild(o,n),s.replaceChild(n,o)}}else{var u=t===!1||t===null||t===void 0;!E&&Kr[i]&&(i=Kr[i]);var a=Jr[i];typeof n[a]=="boolean"&&(n[a]=!!t,t||(u=!0));if(u)return n.removeAttribute(i);var f=d.test(n)?!1:r.namespaces&&hn(n)?!0:i in n.cloneNode(!1);f?n[i]=t+"":n.setAttribute(i,t)}}});"title,alt,src,value,css,include,href".replace(c,function(e){I[e]=Gr}),avalon.directive("class",{init:function(e){var t=e.param,n=e.type;!t||isFinite(t)?(e.param="",I.effect.init(e)):(u("ms-"+n+'-xxx="yyy"这种用法已经过时,请使用ms-'+n+'="xxx:yyy"'),e.expr="["+or(t)+","+e.expr+"]",e.oldStyle=t);if(n==="hover"||n==="active"){if(!e.hasBindEvent){var r=e.element,i=avalon(r),s="mouseenter",o="mouseleave";if(n==="active"){r.tabIndex=r.tabIndex||-1,s="mousedown",o="mouseup";var a=i.bind("mouseleave",function(){e.toggleClass&&i.removeClass(e.newClass)})}}var f=i.bind(s,function(){e.toggleClass&&i.addClass(e.newClass)}),l=i.bind(o,function(){e.toggleClass&&i.removeClass(e.newClass)});e.rollback=function(){i.unbind("mouseleave",a),i.unbind(s,f),i.unbind(o,l)},e.hasBindEvent=!0}},update:function(e){var t=this,n=avalon(this.element);t.newClass=e[0],t.toggleClass=!!e[1],t.oldClass&&t.newClass!==t.oldClass&&n.removeClass(t.oldClass),t.oldClass=t.newClass,t.type==="class"&&(t.oldStyle?n.toggleClass(t.oldStyle,!!e[1]):n.toggleClass(t.newClass,t.toggleClass))}}),"hover,active".replace(c,function(e){I[e]=I["class"]}),avalon.directive("css",{init:I.attr.init,update:function(e){avalon(this.element).css(this.param,e)}}),avalon.directive("data",{priority:100,update:function(e){var t=this.element,n="data-"+this.param;e&&typeof e=="object"?t[n]=e:t.setAttribute(n,String(e))}});var Yr=/^(?:checkbox|radio)$/,Zr=/^(?:radio|checked)$/,ei=/^(file|button|reset|submit|checkbox|radio|range)$/,ti=avalon.directive("duplex",{priority:2e3,init:function(e,t){function a(t){e.changed.call(this,t,e)}function f(){o=!0}function l(){o=!1,setTimeout(c)}var n=e.element,r=e.vmodels;e.changed=lr(n,"data-duplex-changed",r)||k;var i=[],s=L("string,number,boolean,checked");n.type==="radio"&&e.param===""&&(e.param="checked"),e.param.replace(h,function(r){Yr.test(n.type)&&Zr.test(r)&&(r==="radio"&&u("ms-duplex-radio已经更名为ms-duplex-checked"),r="checked",e.isChecked=!0,e.xtype="radio"),r==="bool"?(r="boolean",u("ms-duplex-bool已经更名为ms-duplex-boolean")):r==="text"&&(r="string",u("ms-duplex-text已经更名为ms-duplex-string")),s[r]&&(t=!0),avalon.Array.ensure(i,r)}),t||i.push("string"),e.param=i.join("-"),e.xtype||(e.xtype=n.tagName==="SELECT"?"select":n.type==="checkbox"?"checkbox":n.type==="radio"?"radio":/^change/.test(n.getAttribute("data-duplex-event"))?"change":"input"),e.bound=function(t,r){n.addEventListener?n.addEventListener(t,r,!1):n.attachEvent("on"+t,r);var i=e.rollback;e.rollback=function(){n.avalonSetter=null,avalon.unbind(n,t,r),i&&i()}};var o=!1,c=function(){var t=n.value;if(o||t===e.oldValue||e.pipe===null)return;var r=e.pipe(t,e,"get");try{e.setter(r),a.call(n,r)}catch(i){u(i)}};switch(e.xtype){case"radio":e.bound("click",function(){var t=e.pipe(n.value,e,"get");try{e.setter(t),a.call(n,t)}catch(r){u(r)}});break;case"checkbox":e.bound(E?"change":"click",function(){var t=n.checked?"ensure":"remove",r=e.getter.apply(0,e.vmodels);Array.isArray(r)||(u("ms-duplex应用于checkbox上要对应一个数组"),r=[r]);var i=e.pipe(n.value,e,"get");avalon.Array[t](r,i),a.call(n,r)});break;case"change":e.bound("change",c);break;case"input":M?(M>8?e.bound("input",c):e.bound("propertychange",function(e){e.propertyName==="value"&&c()}),e.bound("dragend",function(){setTimeout(function(){c()},17)})):(e.bound("input",c),e.bound("compositionstart",f),e.bound("compositionend",l),e.bound("DOMAutoComplete",c));break;case"select":e.bound("change",function(){var t=avalon(n).val();Array.isArray(t)?t=t.map(function(t){return e.pipe(t,e,"get")}):t=e.pipe(t,e,"get");if(t+""!==e.oldValue)try{e.setter(t),a.call(n,t)}catch(r){u(r)}}),e.bound("datasetchanged",function(t){if(t.bubble==="selectDuplex"){var r=e._value,i=Array.isArray(r)?r.map(String):r+"";avalon(n).val(i),n.oldValue=i+"",a.call(n,i)}})}e.xtype==="input"&&!ei.test(n.type)&&(n.type!=="hidden"&&(e.bound("focus",function(){n.msFocus=!0}),e.bound("blur",function(){n.msFocus=!1})),n.avalonSetter=c,ui(function(){if(n.contains(n))!this.msFocus&&e.oldValue!==n.value&&c();else if(!n.msRetain)return!1}))},update:function(e){var t=this.element,n=this,r;if(!this.init){for(var i in avalon.vmodels){var s=avalon.vmodels[i];s.$fire("avalon-ms-duplex-init",n)}var o=n.pipe||(n.pipe=ri);o(null,n,"init"),this.init=1}switch(this.xtype){case"input":case"change":r=this.pipe(e,this,"set");if(r!==this.oldValue){var u=!1;if(t.msFocus)try{var a=ai(t);a.start===a.end&&(a=a.start,u=!0)}catch(f){}t.value=this.oldValue=r,u&&fi(t,a,a)}break;case"radio":r=n.isChecked?!!e:e+""===t.value,M===6?setTimeout(function(){t.defaultChecked=r,t.checked=r},31):t.checked=r;break;case"checkbox":var l=[].concat(e);r=this.pipe(t.value,this,"get"),t.checked=l.indexOf(r)>-1;break;case"select":n._value=e,t.msHasEvent?avalon.fireDom(t,"datasetchanged",{bubble:t.msHasEvent}):t.msHasEvent="selectDuplex"}n.xtype!=="select"&&n.changed.call(t,r,n)}});M&&avalon.bind(r,"selectionchange",function(e){var t=r.activeElement;t&&typeof t.avalonSetter=="function"&&t.avalonSetter()}),avalon.duplexHooks={checked:{get:function(e,t){return!t.oldValue}},string:{get:function(e){return e},set:ni},"boolean":{get:function(e){return e==="true"},set:ni},number:{get:function(e,t){var n=parseFloat(e+"");if(-e===-n)return n;var r=/strong|medium|weak/.exec(t.element.getAttribute("data-duplex-number"))||["medium"];switch(r[0]){case"strong":return 0;case"medium":return e===""?"":0;case"weak":return e}},set:ni}};var ii,si=[];avalon.tick=function(e){si.push(e)===1&&(ii=setInterval(oi,60))};var ui=k;new function(){try{var e={},t=HTMLInputElement.prototype,n=HTMLTextAreaElement.prototype;function r(t){e[this.tagName].call(this,t),!this.msFocus&&this.avalonSetter&&this.oldValue!==t&&this.avalonSetter()}var i=HTMLInputElement.prototype;Object.getOwnPropertyNames(i),e.INPUT=Object.getOwnPropertyDescriptor(t,"value").set,Object.defineProperty(t,"value",{set:r}),e.TEXTAREA=Object.getOwnPropertyDescriptor(n,"value").set,Object.defineProperty(n,"value",{set:r})}catch(s){ui=avalon.tick}},avalon.directive("effect",{priority:5,init:function(e){var t=e.expr,n,r,i=t.replace(at,function(e){return e.replace(/./g,"0")}).indexOf(":");i===-1?(n=t,r=!0):(n=t.slice(0,i),r=t.slice(i+1)),ut.test(t)?n=Yn(n):n=or(n),e.expr="["+n+","+r+"]"},update:function(t){var n=t[0],r=this.element;if(r.getAttribute("data-effect-name")===n)return;r.removeAttribute("data-effect-driver");var i=r.style,s=e.getComputedStyle?e.getComputedStyle(r):null,o=!1;if(s&&(li||ci)){var u=i[di]||s[di];u&&u!=="0s"&&(r.setAttribute("data-effect-driver","t"),o=!0),o||(u=i[vi]||s[vi],u&&u!=="0s"&&(r.setAttribute("data-effect-driver","a"),o=!0))}o||avalon.effects[n]&&(r.setAttribute("data-effect-driver","j"),o=!0),o&&r.setAttribute("data-effect-name",n)}}),avalon.effects={},avalon.effect=function(e,t){avalon.effects[e]=t};var li=!1,ci=!1,hi,pi,di=avalon.cssName("transition-duration"),vi=avalon.cssName("animation-duration");new function(){var t={TransitionEvent:"transitionend",WebKitTransitionEvent:"webkitTransitionEnd",OTransitionEvent:"oTransitionEnd",otransitionEvent:"otransitionEnd"},n;for(var r in t){if(e[r]){n=t[r];break}try{var i=document.createEvent(r);n=t[r];break}catch(s){}}typeof n=="string"&&(li=!0,hi=n),t={AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"};var o;for(r in t)if(e[r]){o=t[r];break}typeof o=="string"&&(li=!0,pi=o)};var mi=[],wi=new qr;Ei.prototype={contrustor:Ei,enterClass:function(){return Si(this,"enter")},leaveClass:function(){return Si(this,"leave")},actionFun:function(e,t,n){if(document.hidden)return;var r=this,i=r.el,s=e==="leave";e=s?"leave":"enter";var o=s?"enter":"leave";xi(r,"abort"+bi(o)),xi(r,"before"+bi(e)),s||t(i);var u=function(o){i.removeEventListener(r.cssEvent,r.cssCallback),s?(t(i),avalon(i).removeClass(r.cssClass)):r.driver==="a"&&avalon(i).removeClass(r.cssClass),o!==!0&&(xi(r,"after"+bi(e)),n&&n(i)),r.dispose()};r.useCss?(r.cssCallback&&r.cssCallback(!0),r.cssClass=Si(r,e),r.cssCallback=u,r.update=function(){i.addEventListener(r.cssEvent,r.cssCallback),!s&&r.driver==="t"&&avalon(i).removeClass(r.cssClass)},avalon(i).addClass(r.cssClass),wi.render(!0),wi.queue.push(r)):xi(r,e,u)},enter:function(e,t){this.actionFun.apply(this,["enter"].concat(avalon.slice(arguments)))},leave:function(e,t){this.actionFun.apply(this,["leave"].concat(avalon.slice(arguments)))},dispose:function(){this.update=this.cssCallback=null,mi.unshift(this)>100&&mi.pop()}};var Ti=function(e,t){var n=w.call(arguments,0);typeof n[2]!="function"&&n.splice(2,0,k),typeof n[3]!="function"&&n.splice(3,0,k);var r=n[2],i=n[3],s=n[4],o=gi(e,s);if(!o)return r(),i(),!1;var u=t?"enter":"leave";o[u](r,i)};avalon.mix(avalon.effect,{apply:Ti,append:function(e,t,n,r){return Ti(e,1,function(){t.appendChild(e)},n,r)},before:function(e,t,n,r){return Ti(e,1,function(){t.parentNode.insertBefore(e,t)},n,r)},remove:function(e,t,n,r){return Ti(e,0,function(){e.parentNode===t&&t.removeChild(e)},n,r)}}),avalon.directive("html",{update:function(e){var t=this,n=this.element,i=n.nodeType!==1,s=i?n.parentNode:n;if(!s)return;e=e==null?"":e;if(n.nodeType===3){var o=A("html");s.insertBefore(r.createComment(o),n),t.element=r.createComment(o+":end"),s.replaceChild(t.element,n),n=t.element}if(typeof e!="object")var u=avalon.parseHTML(String(e));else if(e.nodeType===11)u=e;else if(e.nodeType===1||e.item){var a=e.nodeType===1?e.childNodes:e.item;u=x.cloneNode(!0);while(a[0])u.appendChild(a[0])}a=avalon.slice(u.childNodes);if(i){var f=n.nodeValue.slice(0,-4);for(;;){var l=n.previousSibling;if(!l||l.nodeType===8&&l.nodeValue===f)break;s.removeChild(l)}s.insertBefore(u,n)}else avalon.clearHTML(n).appendChild(u);Or(a,t.vmodels)}}),avalon.directive("if",{priority:10,update:function(e){var t=this,n=this.element,i=t.stamp=+(new Date),o,u=function(){if(i!==t.stamp)return;t.recoverNode=null};t.recoverNode&&t.recoverNode();try{if(!n.parentNode)return;o=n.parentNode}catch(a){return}if(e){function f(){n.getAttribute(t.name)&&(n.removeAttribute(t.name),yr(n,t.vmodels)),t.rollback=null}if(n.nodeType===8){var l=t.keep,c=avalon.effect.apply(l,1,function(){if(i!==t.stamp)return;n.parentNode.replaceChild(l,n),n=t.element=l,l.getAttribute("_required")&&(n.required=!0,n.removeAttribute("_required")),n.querySelectorAll&&avalon.each(n.querySelectorAll("[_required=true]"),function(e){e.required=!0,e.removeAttribute("_required")}),f()},u);c=c===!1}c||f()}else if(n.nodeType===1){n.required===!0&&(n.required=!1,n.setAttribute("_required","true"));try{avalon.each(n.querySelectorAll(":required"),function(e){n.required=!1,e.setAttribute("_required","true")})}catch(a){}var h=t.element=r.createComment("ms-if"),p=n.nextSibling;t.recoverNode=function(){t.recoverNode=null,h.parentNode!==o&&(o.insertBefore(h,p),t.keep=n)},avalon.effect.apply(n,0,function(){t.recoverNode=null;if(i!==t.stamp)return;n.parentNode.replaceChild(h,n),t.keep=n,s.appendChild(n),t.rollback=function(){n.parentNode===s&&s.removeChild(n)}},u)}}});var Ni=/<noscript.*?>(?:[\s\S]+?)<\/noscript>/img,Ci=/<noscript.*?>([\s\S]+?)<\/noscript>/im,ki=function(){return new(e.XMLHttpRequest||ActiveXObject)("Microsoft.XMLHTTP")},Li=avalon.templateCache={};avalon.directive("include",{init:I.attr.init,update:function(e){var t=this,n=this.element,i=t.vmodels,o=t.includeRendered,a=t.effectName&&t.effectClass,f=t.templateCache,l=t.includeReplace,c=t.includeLoaded,h=l?n.parentNode:n,p=t._element;t.recoverNodes=t.recoverNodes||avalon.noop;var d=function(u){var d=t._stamp=+(new Date);if(c){var v=c.apply(h,[u].concat(i));typeof v=="string"&&(u=v)}o&&ar(h,function(){o.call(h)},NaN);var m=t.includeLastID||"_default";t.includeLastID=e;var g=f&&f[m]||r.createElement(n.tagName||t._element.tagName);a&&(g.className=a,h.insertBefore(g,t.start)),(f||{})[m]=g;var y=t.recoverNodes();y&&h.insertBefore(y,t.end);for(;;){var b=t.start.nextSibling;if(!b||b===g||b===t.end)break;g.appendChild(b)}avalon.effect.remove(g,h,function(){f&&d===t._stamp&&s.appendChild(g)},t);var w=h,E=avalon.noop,S=avalon.noop,x=Ai(t,e,u),T=avalon.slice(x.childNodes);l&&a?(w=p,w.innerHTML="",w.setAttribute("ms-skip","true"),h.insertBefore(w,t.end.nextSibling),E=function(){w.insertBefore(x,null)},S=function(){t.recoverNodes=avalon.noop,d===t._stamp&&(x=Oi(T),h.insertBefore(x,t.end),Or(T,i)),w.parentNode===h&&h.removeChild(w)},t.recoverNodes=function(){return t.recoverNodes=avalon.noop,Oi(T)}):E=function(){h.insertBefore(x,t.end),Or(T,i)},avalon.effect.apply(w,"enter",E,S)};if(t.param==="src")if(typeof Li[e]=="string")avalon.nextTick(function(){d(Li[e])});else if(Array.isArray(Li[e]))Li[e].push(d);else{var v=ki();v.onreadystatechange=function(){if(v.readyState===4){var t=v.status;if(t>=200&&t<300||t===304||t===1223){var n=v.responseText;for(var r=0,i;i=Li[e][r++];)i(n);Li[e]=n}else u("ms-include load ["+e+"] error")}},Li[e]=[d],v.open("GET",e,!0),"withCredentials"in v&&(v.withCredentials=!0),v.setRequestHeader("X-Requested-With","XMLHttpRequest"),v.send(null)}else{var m=e&&e.nodeType===1?e:r.getElementById(e);if(m){if(m.tagName==="NOSCRIPT"&&!m.innerHTML&&!m.fixIE78){v=ki(),v.open("GET",location,!1),v.send(null);var g=r.getElementsByTagName("noscript"),y=(v.responseText||"").match(Ni)||[],b=y.length;for(var w=0;w<b;w++){var E=g[w];E&&(E.style.display="none",E.fixIE78=(y[w].match(Ci)||["","&nbsp;"])[1])}}avalon.nextTick(function(){d(m.fixIE78||m.value||m.innerText||m.innerHTML)})}}}});var Mi=/\(([^)]*)\)/,_i=avalon.directive("on",{priority:3e3,init:function(e){var t=e.expr;e.type="on";var n=e.param.replace(/-\d+$/,"");typeof _i[n+"Hook"]=="function"&&_i[n+"Hook"](e);if(t.indexOf("(")>0&&t.indexOf(")")>-1){var r=(t.match(Mi)||["",""])[1].trim();if(r===""||r==="$event")t=t.replace(Mi,"")}e.expr=t},update:function(e){var t=this,n=this.element;e=function(e){var n=t.getter||k;return n.apply(this,t.args.concat(e))};var r=t.param.replace(/-\d+$/,"");if(r==="scan")e.call(n,{type:r});else if(typeof t.specialBind=="function")t.specialBind(n,e);else var i=avalon.bind(n,r,e);t.rollback=function(){typeof t.specialUnbind=="function"?t.specialUnbind():avalon.unbind(n,r,i)}}});avalon.directive("repeat",{priority:90,init:function(e){var t=e.type;e.cache={},e.enterCount=0;var n=e.element;if(n.nodeType===1){n.removeAttribute(e.name),yi(n,e),e.param=e.param||"el",e.sortedCallback=lr(n,"data-with-sorted",e.vmodels);var i=lr(n,"data-"+t+"-rendered",e.vmodels),s=A(t),o=r.createComment(s+":start"),u=e.element=r.createComment(s+":end");e.signature=s,e.start=o,e.template=x.cloneNode(!1);if(t==="repeat"){var a=n.parentNode;a.replaceChild(u,n),a.insertBefore(o,u),e.template.appendChild(n)}else{while(n.firstChild)e.template.appendChild(n.firstChild);n.appendChild(o),n.appendChild(u),a=n}e.element=u;if(i)var f=avalon.bind(a,"datasetchanged",function(){i.apply(a,a.args),avalon.unbind(a,"datasetchanged",f),a.msRendered=i})}},update:function(e,t){var n=this,r=this.xtype;this.enterCount+=1;var i=!t;if(i){n.$outer={};var s="$key",o="$val";r==="array"&&(s="$first",o="$last");for(var u=0,a;a=n.vmodels[u++];)if(a.hasOwnProperty(s)&&a.hasOwnProperty(o)){n.$outer=a;break}}var f=this.track;if(n.sortedCallback){var l=n.sortedCallback.call(b,f);l&&Array.isArray(l)&&(f=l)}var c="move";n.$repeat=e;var h=[],p=i&&x.cloneNode(!1),d=[],v=this.param,m=avalon.mix({},this.cache),g=this.element,y=f.length,b=g.parentNode;for(u=0;u<y;u++){var w=f[u],E=m[w];if(!E){E=ji(this),E.$up=null;if(r==="array"){c="add",E.$id=w;var S=e[u];E[v]=S,Object(S)===S&&(S.$ups=S.$ups||{},S.$ups[v]=E)}else c="append",E.$key=w,E.$val=e[w];this.cache[w]=E;var T=E.$anchor||(E.$anchor=g.cloneNode(!1));T.nodeValue=this.signature,Bi(n,p,E,h,i&&!n.effectDriver),Ri(E,n,r)}else h.push({}),m[w]=!0;this.enterCount===1&&(E.$active=!1,E.$oldIndex=E.$index,E.$active=!0,E.$index=u),r==="array"?(E.$first=u===0,E.$last=u===y-1):E.$val=_t(e[w]),d.push(E)}this.proxies=d;if(i&&!n.effectDriver)b.insertBefore(p,g),h.forEach(function(e){Or(e.nodes||[],e.vmodels),e.nodes=e.vmodels=null});else{var N=n.staggerIndex=0;for(w in m)m[w]!==!0&&(c="del",Hi(m[w].$anchor,n),Xi(this.cache,w,v),m[w]=null);for(u=0;u<y;u++){E=d[u],w=r==="array"?E.$id:E.$key;var C=d[u-1],k=C?C.$anchor:n.start;m[w]?E.$index!==E.$oldIndex&&function(e,t){N=Pi(n.effectEnterStagger,function(){var r=Hi(e.$anchor),i=avalon.slice(r.childNodes);b.insertBefore(r,t.nextSibling),Di(i,1,n)},N)}(E,k):function(e,t){var r=e.nodes,i=e.vmodels;r&&(N=Pi(n.effectEnterStagger,function(){b.insertBefore(e.content,t.nextSibling),Or(r,i),Di(r,1,n)},N)),e.nodes=e.vmodels=null}(h[u],k)}}if(!e.$track)for(w in this.cache)Xi(this.cache,w,v);(function(e){b.args=e,b.msRendered&&b.msRendered.apply(b,e)})(it.newWatch?arguments:[c]);var L=setTimeout(function(){clearTimeout(L),avalon.fireDom(b,"datasetchanged",{bubble:b.msHasEvent})});this.enterCount-=1}}),"with,each".replace(c,function(e){I[e]=avalon.mix({},I.repeat,{priority:1400})});var Fi=[],Ui=[];avalon.directive("text",{update:function(e){var t=this.element;e=e==null?"":e;if(t.nodeType===3)try{t.data=e}catch(n){}else"textContent"in t?t.textContent=e:t.innerText=e}}),avalon.parseDisplay=Vi,avalon.directive("visible",{init:function(e){yi(e.element,e)},update:function(e){var t=this,n=this.element,r,i=!this.effectName;if(!this.stamp){r=this.stamp=+(new Date),e?(n.style.display=t.display||"",avalon(n).css("display")==="none"&&(n.style.display=t.display=Vi(n.nodeName))):n.style.display="none";return}r=this.stamp=+(new Date),e?avalon.effect.apply(n,1,function(){if(r!==t.stamp)return;var e=n.getAttribute("data-effect-driver")||"a";i&&(n.style.display=t.display||""),(e==="a"||e==="t")&&avalon(n).css("display")==="none"&&(n.style.display=t.display||Vi(n.nodeName))}):avalon.effect.apply(n,0,function(){if(r!==t.stamp)return;n.style.display="none"})}});var $i=/<script[^>]*>([\S\s]*?)<\/script\s*>/gim,Ji=/\s+(on[^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g,Ki=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/ig,Qi={a:/\b(href)\=("javascript[^"]*"|'javascript[^']*')/ig,img:/\b(src)\=("javascript[^"]*"|'javascript[^']*')/ig,form:/\b(action)\=("javascript[^"]*"|'javascript[^']*')/ig},Gi=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Yi=/([^\#-~| |!])/g,es=avalon.filters={uppercase:function(e){return e.toUpperCase()},lowercase:function(e){return e.toLowerCase()},truncate:function(e,t,n){return t=t||30,n=typeof n=="string"?n:"...",e.length>t?e.slice(0,t-n.length)+n:String(e)},$filter:function(e){for(var t=1,n=arguments.length;t<n;t++){var r=arguments[t],i=avalon.filters[r[0]];if(typeof i=="function"){var s=[e].concat(r.slice(1));e=i.apply(null,s)}}return e},camelize:vn,sanitize:function(e){return e.replace($i,"").replace(Ki,function(e,t){var n=e.toLowerCase().match(/<(\w+)\s/);if(n){var r=Qi[n[1]];r&&(e=e.replace(r,function(e,t,n){var r=n.charAt(0);return t+"="+r+"javascript:void(0)"+r}))}return e.replace(Ji," ").replace(/\s+/g," ")})},escape:function(e){return String(e).replace(/&/g,"&amp;").replace(Gi,function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return"&#"+((t-55296)*1024+(n-56320)+65536)+";"}).replace(Yi,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")},currency:function(e,t,n){return(t||"￥")+Zi(e,isFinite(n)?n:2)},number:Zi};new function(){function e(e){return parseInt(e,10)||0}function t(e,t,n){var r="";e<0&&(r="-",e=-e),e=""+e;while(e.length<t)e="0"+e;return n&&(e=e.substr(e.length-t)),r+e}function n(e,n,r,i){return function(s){var o=s["get"+e]();if(r>0||o>-r)o+=r;return o===0&&r===-12&&(o=12),t(o,n,i)}}function r(e,t){return function(n,r){var i=n["get"+e](),s=(t?"SHORT"+e:e).toUpperCase();return r[s][i]}}function i(e){var n=-1*e.getTimezoneOffset(),r=n>=0?"+":"";return r+=t(Math[n>0?"floor":"ceil"](n/60),2)+t(Math.abs(n%60),2),r}function s(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}var o={yyyy:n("FullYear",4),yy:n("FullYear",2,0,!0),y:n("FullYear",1),MMMM:r("Month"),MMM:r("Month",!0),MM:n("Month",2,1),M:n("Month",1,1),dd:n("Date",2),d:n("Date",1),HH:n("Hours",2),H:n("Hours",1),hh:n("Hours",2,-12),h:n("Hours",1,-12),mm:n("Minutes",2),m:n("Minutes",1),ss:n("Seconds",2),s:n("Seconds",1),sss:n("Milliseconds",3),EEEE:r("Day"),EEE:r("Day",!0),a:s,Z:i},u=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,a=/^\/Date\((\d+)\)\/$/;es.date=function(t,n){var r=es.date.locate,i="",s=[],f,l;n=n||"mediumDate",n=r[n]||n;if(typeof t=="string")if(/^\d+$/.test(t))t=e(t);else if(a.test(t))t=+RegExp.$1;else{var c=t.trim(),h=[0,0,0,0,0,0,0],p=new Date(0);c=c.replace(/^(\d+)\D(\d+)\D(\d+)/,function(t,n,r,i){var s=i.length===4?[i,n,r]:[n,r,i];return h[0]=e(s[0]),h[1]=e(s[1])-1,h[2]=e(s[2]),""});var d=p.setFullYear,v=p.setHours;c=c.replace(/[T\s](\d+):(\d+):?(\d+)?\.?(\d)?/,function(t,n,r,i,s){return h[3]=e(n),h[4]=e(r),h[5]=e(i),s&&(h[6]=Math.round(parseFloat("0."+s)*1e3)),""});var m=0,g=0;c=c.replace(/Z|([+-])(\d\d):?(\d\d)/,function(t,n,r,i){return d=p.setUTCFullYear,v=p.setUTCHours,n&&(m=e(n+r),g=e(n+i)),""}),h[3]-=m,h[4]-=g,d.apply(p,h.slice(0,3)),v.apply(p,h.slice(3)),t=p}typeof t=="number"&&(t=new Date(t));if(avalon.type(t)!=="date")return;while(n)l=u.exec(n),l?(s=s.concat(l.slice(1)),n=s.pop()):(s.push(n),n=null);return s.forEach(function(e){f=o[e],i+=f?f(t,r):e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),i};var f={AMPMS:{0:"上午",1:"下午"},DAY:{0:"星期日",1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六"},MONTH:{0:"1月",1:"2月",2:"3月",3:"4月",4:"5月",5:"6月",6:"7月",7:"8月",8:"9月",9:"10月",10:"11月",11:"12月"},SHORTDAY:{0:"周日",1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六"},fullDate:"y年M月d日EEEE",longDate:"y年M月d日",medium:"yyyy-M-d H:mm:ss",mediumDate:"yyyy-M-d",mediumTime:"H:mm:ss","short":"yy-M-d ah:mm",shortDate:"yy-M-d",shortTime:"ah:mm"};f.SHORTMONTH=f.MONTH,es.date.locate=f};var ts=[],ns,rs=function(e){ns=!0;var t=avalon.require;t&&t.checkDeps&&(modules["domReady!"].state=4,t.checkDeps());while(e=ts.shift())e(avalon)};if(r.readyState==="complete")setTimeout(rs);else if(E)r.addEventListener("DOMContentLoaded",rs);else{r.attachEvent("onreadystatechange",function(){r.readyState==="complete"&&rs()});try{var ss=e.frameElement===null}catch(St){}S.doScroll&&ss&&e.external&&is()}avalon.bind(e,"load",rs),avalon.ready=function(e){ns?e(avalon):ts.push(e)},avalon.config({loader:!0}),avalon.ready(function(){avalon.scan(r.body)}),typeof define=="function"&&define.amd&&define("avalon",[],function(){return avalon});var os=e.avalon;return avalon.noConflict=function(t){return t&&e.avalon===avalon&&(e.avalon=os),avalon},t===void 0&&(e.avalon=avalon),avalon});